import{_ as a,c as s,o as i,a4 as e}from"./chunks/framework.nQaBHiNx.js";const g=JSON.parse('{"title":"Guia de atualização","description":"","frontmatter":{},"headers":[],"relativePath":"docs/upgrade.md","filePath":"docs/upgrade.md"}'),t={name:"docs/upgrade.md"},o=e(`<h1 id="guia-de-atualizacao" tabindex="-1">Guia de atualização <a class="header-anchor" href="#guia-de-atualizacao" aria-label="Permalink to &quot;Guia de atualização&quot;">​</a></h1><h2 id="mudancas-de-grande-impacto" tabindex="-1">Mudanças de grande impacto <a class="header-anchor" href="#mudancas-de-grande-impacto" aria-label="Permalink to &quot;Mudanças de grande impacto&quot;">​</a></h2><ul><li><a href="#updating-dependencies">Atualizando dependências</a></li><li><a href="#application-structure">Estrutura da Aplicação</a></li><li><a href="#floating-point-types">Tipos de ponto flutuante (floating point types)</a></li><li><a href="#modifying-columns">Modificar Colunas</a></li><li><a href="#sqlite-minimum-version">Versão mínima do SQLite</a></li><li><a href="#updating-sanctum">Atualizando o Sanctum</a></li></ul><h2 id="mudancas-de-impacto-medio" tabindex="-1">Mudanças de impacto médio <a class="header-anchor" href="#mudancas-de-impacto-medio" aria-label="Permalink to &quot;Mudanças de impacto médio&quot;">​</a></h2><ul><li><a href="#carbon-3"> Carbon 3</a></li><li><a href="#password-rehashing">Reorganizar senhas</a></li><li>[Limitação de taxa por segundo](rate limiting)</li></ul><h2 id="mudancas-de-baixo-impacto" tabindex="-1">Mudanças de baixo impacto <a class="header-anchor" href="#mudancas-de-baixo-impacto" aria-label="Permalink to &quot;Mudanças de baixo impacto&quot;">​</a></h2><ul><li><a href="#doctrine-dbal-removal">Remoção de Doctrine DBAL</a></li><li><a href="#eloquent-model-casts-method">Método de conversão do modelo Eloquent</a></li><li><a href="#spatial-types">Tipos espaciais</a></li><li><a href="#spatie-once-package">Pacote Spatie One</a></li><li><a href="#the-enumerable-contract">Contrato Enumerável</a></li><li><a href="#the-user-provider-contract">Contrato <code>UserProvider</code></a></li><li><a href="#the-authenticatable-contract">Contrato <code>Autenticável</code></a></li></ul><h2 id="atualizar-de-10-x-para-11-0" tabindex="-1">Atualizar de 10.x para 11.0 <a class="header-anchor" href="#atualizar-de-10-x-para-11-0" aria-label="Permalink to &quot;Atualizar de 10.x para 11.0&quot;">​</a></h2><h4 id="tempo-estimado-de-atualizacao-15-minutos" tabindex="-1">Tempo estimado de atualização: 15 minutos <a class="header-anchor" href="#tempo-estimado-de-atualizacao-15-minutos" aria-label="Permalink to &quot;Tempo estimado de atualização: 15 minutos&quot;">​</a></h4><div class="info custom-block"><p class="custom-block-title">NOTA</p><p>Tentamos documentar todas as alterações significativas possíveis. Como algumas dessas alterações importantes estão em partes obscuras da estrutura, apenas uma parte dessas alterações pode realmente afetar seu aplicativo. Quer economizar tempo? Você pode usar o <a href="https://laravelshift.com/" target="_blank" rel="noreferrer">Laravel Shift</a> para ajudar a automatizar as atualizações do seu aplicativo.</p></div><h3 id="atualizacao-das-dependencias" tabindex="-1">Atualização das dependências <a class="header-anchor" href="#atualizacao-das-dependencias" aria-label="Permalink to &quot;Atualização das dependências&quot;">​</a></h3><p><strong>Probabilidade de impacto: alta</strong></p><h4 id="php-8-2-0-e-necessario" tabindex="-1">PHP 8.2.0 é necessário <a class="header-anchor" href="#php-8-2-0-e-necessario" aria-label="Permalink to &quot;PHP 8.2.0 é necessário&quot;">​</a></h4><p>Agora o Laravel requer um PHP igual ou superior a 8.2.0.</p><h4 id="curl-7-34-0-obrigatorio" tabindex="-1">curl 7.34.0 Obrigatório <a class="header-anchor" href="#curl-7-34-0-obrigatorio" aria-label="Permalink to &quot;curl 7.34.0 Obrigatório&quot;">​</a></h4><p>Agora o cliente de HTTP do Laravel exige a versão curl 7.34.0 ou superior.</p><h4 id="dependencias-do-composer" tabindex="-1">Dependências do composer <a class="header-anchor" href="#dependencias-do-composer" aria-label="Permalink to &quot;Dependências do composer&quot;">​</a></h4><p>Deve atualizar as seguintes dependências no seu ficheiro do Composer <code>composer.json</code>:</p><ul><li><code>laravel/framework</code> para <code>^11.0</code></li><li><code>nunomaduro/collision</code> para <code>^8.1</code></li><li><code>laravel/breeze</code> para <code>^2.0</code> (Se instalado). <code>- laravel/cashier</code> para <code>^15.0</code> (Se instalado).</li><li><code>laravel/dusk</code> para <code>^8.0</code> (Se instalado) <code>- laravel/jetstream</code> para <code>^5.0</code> (Se instalado)</li><li><code>laravel/octane</code>: para <code>^2.3</code> (Se instalado).</li><li><code>laravel/passport</code> para <code>^12.0</code> (Se instalado)</li><li><code>laravel/sanctum</code> para <code>^4.0</code> (Se instalado) <code>- laravel/scout</code> para <code>^10.0</code> (se instalado)</li><li><code>laravel/spark-stripe</code> para <code>^5.0</code> (Se instalado) <code>- laravel/telescope</code>, para <code>^5.0</code> (se instalado)</li><li><code>inertiajs/inertia-laravel</code> para <code>^1.0</code> (se instalado)</li></ul><p>Se o seu aplicativo estiver usando Laravel Cashier, Passport, Sanctum, Spark Stripe ou Telescope, você precisará publicar suas migrações para seu aplicativo. O Cashier, Passport, Sanctum, Spark Stripe e Telescope <strong>não carregam mais automaticamente as migrações do seu diretório de migrações</strong>. Portanto, execute o seguinte comando para publicar suas migrações no aplicativo:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vendor:publish</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tag=cashier-migrations</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vendor:publish</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tag=passport-migrations</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vendor:publish</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tag=sanctum-migrations</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vendor:publish</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tag=spark-migrations</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vendor:publish</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tag=telescope-migrations</span></span></code></pre></div><p>Além disso, você deve revisar os guias de atualização para cada um destes pacotes para garantir que você esteja ciente das mudanças adicionais.</p><ul><li><a href="#cashier-stripe">Laravel Cashier Stripe</a></li><li><a href="#passport">Laravel Passport</a></li><li><a href="#sanctum">Laravel Sanctum</a></li><li><a href="#spark-stripe">Laravel Spark Stripe</a></li><li><a href="#telescope">Laravel Telescope</a></li></ul><p>Se você tiver instalado o instalador do Laravel manualmente, deverá atualizar o instalador por meio do Composer:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> require</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> laravel/installer:^5.6</span></span></code></pre></div><p>Finalmente, você pode remover a dependência do Composer <code>doctrine/dbal</code> se já tiver adicionado a sua aplicação, pois o Laravel não depende mais desse pacote.</p><h3 id="estrutura-do-aplicativo" tabindex="-1">Estrutura do Aplicativo <a class="header-anchor" href="#estrutura-do-aplicativo" aria-label="Permalink to &quot;Estrutura do Aplicativo&quot;">​</a></h3><p>O Laravel 11 apresenta uma nova estrutura de aplicação com menos ficheiros padrão. Na prática, novas aplicações do Laravel possuem menos serviços providers, middlewares e arquivos de configuração.</p><p>No entanto, <strong>não recomendamos</strong> que aplicações do Laravel 10 que estejam a fazer uma atualização para o Laravel 11 procurem migrar sua estrutura de aplicação, já que o Laravel 11 foi cuidadosamente desenvolvido para suportar também a estrutura da aplicação do Laravel 10.</p><h3 id="autenticacao" tabindex="-1">Autenticação <a class="header-anchor" href="#autenticacao" aria-label="Permalink to &quot;Autenticação&quot;">​</a></h3><h4 id="recriptografar-senha" tabindex="-1">Recriptografar senha <a class="header-anchor" href="#recriptografar-senha" aria-label="Permalink to &quot;Recriptografar senha&quot;">​</a></h4><p>O Laravel 11 irá automaticamente reprocessar as senhas de um usuário durante a autenticação caso o algoritmo de hashing tenha tido alterações significativas desde que a senha foi processada pela última vez.</p><p>Geralmente, isso não deve interromper o aplicativo; no entanto, você pode desabilitar esse comportamento adicionando a opção <code>rehash_on_login</code> ao arquivo de configuração do seu aplicativo em <code>config/hashing.php</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;rehash_on_login&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span></code></pre></div><h4 id="contrato-do-userprovider" tabindex="-1">Contrato do <code>UserProvider</code> <a class="header-anchor" href="#contrato-do-userprovider" aria-label="Permalink to &quot;Contrato do \`UserProvider\`&quot;">​</a></h4><p><strong>Possibilidade de ocorrência: baixa</strong></p><p>O contrato <code>Illuminate\\Contracts\\Auth\\UserProvider</code> recebeu um novo método, chamado <code>rehashPasswordIfRequired</code>. Esse método é responsável por reprocessar e armazenar a senha do usuário no banco de dados quando o fator de trabalho do algoritmo de hashing da aplicação mudou.</p><p>Se o seu pacote ou aplicativo definir uma classe que implemente essa interface, deve adicionar o novo método <code>rehashPasswordIfRequired</code> na sua implementação. Uma implementação de referência pode ser encontrada na classe <code>Illuminate\\Auth\\EloquentUserProvider</code>.</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rehashPasswordIfRequired</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Authenticatable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $user, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $credentials, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $force </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h4 id="contrato-authenticatable" tabindex="-1">Contrato <code>Authenticatable</code> <a class="header-anchor" href="#contrato-authenticatable" aria-label="Permalink to &quot;Contrato \`Authenticatable\`&quot;">​</a></h4><p><strong>Provável impacto: Baixo</strong></p><p>O contrato <code>Illuminate\\Contracts\\Auth\\Authenticatable</code> recebeu um novo método chamado <code>getAuthPasswordName</code>. Este método é responsável por retornar o nome da coluna de senha do objeto que você deseja autenticar.</p><p>Se o seu pacote ou aplicação definir uma classe que implemente esta interface, deve adicionar a nova metodologia <code>getAuthPasswordName</code> à sua implementação:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getAuthPasswordName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;password&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>O modelo de usuário padrão incluído no Laravel recebe automaticamente esse método, uma vez que está incluso na trait <code>Illuminate\\Auth\\Authenticatable</code>.</p><h4 id="a-classe-authenticationexception" tabindex="-1">A classe <code>AuthenticationException</code> <a class="header-anchor" href="#a-classe-authenticationexception" aria-label="Permalink to &quot;A classe \`AuthenticationException\`&quot;">​</a></h4><p><strong>Probabilidade de impacto: muito baixa</strong></p><p>O método <code>redirectTo</code> da classe <code>Illuminate\\Auth\\AuthenticationException</code> agora requer uma instância de <code>Illuminate\\Http\\Request</code> como seu primeiro argumento. Se você estiver capturando essa exceção manualmente e chamando o método <code>redirectTo</code>, você deve atualizar seu código em conformidade:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ($e </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">instanceof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AuthenticationException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redirectTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($request);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="cache" tabindex="-1">Cache <a class="header-anchor" href="#cache" aria-label="Permalink to &quot;Cache&quot;">​</a></h3><h4 id="prefixos-para-os-caches-chave" tabindex="-1">Prefixos para os caches chave <a class="header-anchor" href="#prefixos-para-os-caches-chave" aria-label="Permalink to &quot;Prefixos para os caches chave&quot;">​</a></h4><p><strong>Possibilidade de impacto: muito baixa</strong></p><p>Anteriormente, se um prefixo da chave do cache for definido para o armazenamento de cache DynamoDB, Memcached ou Redis, o Laravel iria adicionar um <code>:</code> ao prefixo. No Laravel 11, o prefixo da chave de cache não recebe o sufixo <code>:</code>. Se desejar manter o comportamento de prefixação anterior, você pode adicionar manualmente o sufixo <code>:</code> ao seu prefixo de chave do cache.</p><h3 id="colecoes" tabindex="-1">Coleções <a class="header-anchor" href="#colecoes" aria-label="Permalink to &quot;Coleções&quot;">​</a></h3><h4 id="contrato-do-enumerable" tabindex="-1">Contrato do <code>Enumerable</code> <a class="header-anchor" href="#contrato-do-enumerable" aria-label="Permalink to &quot;Contrato do \`Enumerable\`&quot;">​</a></h4><p><strong>Probabilidade de impacto: Baixa</strong></p><p>O método <code>dump</code> do contrato <code>Illuminate\\Support\\Enumerable</code> foi atualizado para aceitar um argumento variável <code>...$args</code>. Se você estiver implementando essa interface, deverá atualizar sua implantação em conformidade:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dump</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$args);</span></span></code></pre></div><h3 id="base-de-dados" tabindex="-1">Base de dados <a class="header-anchor" href="#base-de-dados" aria-label="Permalink to &quot;Base de dados&quot;">​</a></h3><h4 id="sqlite-3-35-0" tabindex="-1">SQLite 3.35.0+ <a class="header-anchor" href="#sqlite-3-35-0" aria-label="Permalink to &quot;SQLite 3.35.0+&quot;">​</a></h4><p><strong>Probabilidade de impacto: Alta</strong></p><p>Se o seu aplicativo estiver a utilizar uma base de dados SQLite, será necessário que esteja instalada a versão SQLite 3.35.0 ou superior.</p><h4 id="metodo-de-conversao-do-modelo-eloquent" tabindex="-1">Método de conversão do modelo Eloquent <a class="header-anchor" href="#metodo-de-conversao-do-modelo-eloquent" aria-label="Permalink to &quot;Método de conversão do modelo Eloquent&quot;">​</a></h4><p><strong>Probabilidade de impacto: Baixa</strong></p><p>A classe modelo Eloquent básica define agora um método <code>casts</code> para suportar a definição de atributos convertidos. Se um dos modelos da aplicação definir uma relação <code>casts</code>, pode haver conflito com o método <code>casts</code> presente na classe modelo Eloquent básica.</p><h4 id="modificar-colunas" tabindex="-1">Modificar Colunas <a class="header-anchor" href="#modificar-colunas" aria-label="Permalink to &quot;Modificar Colunas&quot;">​</a></h4><p><strong>Probabilidade de impacto: Alta</strong></p><p>Agora, ao modificar uma coluna, você deve incluir explicitamente todos os atributos que deseja manter na definição da coluna após a alteração. Os atributos ausentes serão excluídos. Por exemplo, para manter o atributo <code>unsigned</code>, <code>default</code> e <code>comment</code>, você deve chamar cada um dos atributos explicitamente ao alterar a coluna, mesmo que os atributos tenham sido atribuídos à coluna por uma migração anterior.</p><p>Por exemplo, imagine que você tenha uma migração que crie a coluna <code>votes</code> com os atributos <code>unsigned</code>, <code>default</code> e <code>comment</code>.</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Schema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Blueprint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $table) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;votes&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unsigned</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">comment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;The vote count&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>Depois, você escreve uma migração que muda essa coluna para ser também <code>nullable</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Schema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Blueprint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $table) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;votes&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nullable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">change</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>Na versão 10 do Laravel, essa migração manteria os atributos <code>unsigned</code>, <code>default</code> e <code>comment</code> na coluna. No entanto, a partir da versão 11, a migração deve incluir todos os atributos que foram definidos anteriormente na coluna; caso contrário, eles serão apagados:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Schema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Blueprint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $table) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;votes&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        -&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unsigned</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        -&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        -&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">comment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;The vote count&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        -&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nullable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        -&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">change</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>O método <code>change</code> não altera os índices da coluna, portanto, você pode usar o modificador de índice para adicionar ou remover um índice explicitamente ao modificar a coluna.</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Adiciona um índice...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bigIncrements</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">primary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">change</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Remove um índice...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">char</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;postal_code&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unique</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">change</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p>Se você não quiser atualizar todas as migrações de alteração existentes em seu aplicativo para reter os atributos existentes da coluna, você pode simplesmente <a href="/docs/migrations.html#squashing-migrations">reduzir suas migrações</a>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> schema:dump</span></span></code></pre></div><p>Depois que suas migrações tiverem sido combinadas, o Laravel irá &quot;migrar&quot; o banco de dados usando o arquivo de esquema do seu aplicativo antes de executar quaisquer migrações pendentes.</p><p><a name="floating-point-types"></a></p><h4 id="tipos-de-ponto-flutuante" tabindex="-1">Tipos de ponto flutuante <a class="header-anchor" href="#tipos-de-ponto-flutuante" aria-label="Permalink to &quot;Tipos de ponto flutuante&quot;">​</a></h4><p><strong>Probabilidade de impacto: alta</strong></p><p>Os tipos de coluna de migração <code>double</code> e <code>float</code> foram reescritos para serem consistentes em todos os bancos de dados.</p><p>O tipo de coluna <code>double</code> cria agora uma coluna equivalente a <code>DOUBLE</code> sem dígitos totais e posições (dígitos após o ponto decimal), que é a sintaxe SQL padrão. Portanto, você pode remover os argumentos para <code>$total</code> e <code>$places</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;amount&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>O tipo de coluna <code>float</code> agora cria uma coluna equivalente a <code>FLOAT</code>, sem números totais e posições (números após o ponto decimal), mas com uma especificação opcional <code>$precision</code> para determinar o tamanho de armazenamento como uma coluna de 4 bytes de precisão única ou uma coluna de 8 bytes de dupla precisão. Portanto, você pode remover os argumentos para <code>$total</code> e <code>$places</code>, além da especificação opcional <code>$precision</code>, no valor desejado, conforme a documentação do seu banco de dados:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">float</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;amount&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">precision</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">53</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>Os métodos <code>unsignedDecimal</code>, <code>unsignedDouble</code>, e <code>unsignedFloat</code> foram removidos, pois o atributo semiefeito para esses tipos de coluna foi descontinuado pelo MySQL. Além disso, esse atributo nunca foi padronizado em outros sistemas de banco de dados. No entanto, se você quiser continuar usando o atributo descontinuado para esses tipos de coluna, pode acoplar o método <code>unsigned</code> na definição da coluna:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">decimal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;amount&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">total</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">places</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unsigned</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;amount&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unsigned</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">float</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;amount&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">precision</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">53</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unsigned</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h4 id="driver-dedicado-para-mariadb" tabindex="-1">Driver dedicado para MariaDB <a class="header-anchor" href="#driver-dedicado-para-mariadb" aria-label="Permalink to &quot;Driver dedicado para MariaDB&quot;">​</a></h4><p><strong>Probabilidade de impacto: muito baixa</strong></p><p>Ao invés de utilizar sempre o driver do MySQL quando conectado ao bancos de dados MariaDB, o Laravel 11 adicionou um driver dedicado para os mesmos.</p><p>Se o seu aplicativo estiver conectado a um banco de dados MariaDB, você poderá atualizar a configuração da conexão para o novo driver <code>mariadb</code> para aproveitar as funcionalidades específicas do MariaDB no futuro.</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;driver&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;mariadb&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;url&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;DB_URL&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;host&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;DB_HOST&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;127.0.0.1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;port&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;DB_PORT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;3306&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span></code></pre></div><p>Atualmente, o novo driver para MariaDB funciona da mesma forma que o atual driver para MySQL com uma exceção: a método de construção do esquema <code>uuid</code> cria colunas UUID nativas em vez de colunas <code>char(36)</code>.</p><p>Se você utilizar o esquema construtor de schema <code>uuid</code> em suas migrações e escolher usar o novo driver do banco de dados <code>mariadb</code>, deve atualizar as invocações da <code>uuid</code> para <code>char</code> nas suas migrações, a fim de evitar alterações ou comportamentos inesperados:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Schema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Blueprint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $table) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">char</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;uuid&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">36</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h4 id="tipos-espaciais" tabindex="-1">Tipos Espaciais <a class="header-anchor" href="#tipos-espaciais" aria-label="Permalink to &quot;Tipos Espaciais&quot;">​</a></h4><p><strong>Probabilidade de impacto: Baixa</strong></p><p>Os tipos de coluna espacial de migração de banco de dados foram re-escritos para serem consistentes entre todos os bancos de dados. Por conseguinte, pode remover os métodos <code>point</code>, <code>lineString</code>, <code>polygon</code>, <code>geometryCollection</code>, <code>multiPoint</code>, <code>multiLineString</code>, <code>multiPolygon</code> e <code>multiPolygonZ</code> das suas migrações e usar, em vez disso, métodos <code>geometry</code> ou <code>geography</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">geometry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;shapes&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">geography</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;coordinates&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>Para restringir explicitamente o tipo ou identificador de sistema de referência espacial para valores armazenados na coluna em MySQL, MariaDB e PostgreSQL, você pode passar os parâmetros <code>subtype</code> e <code>srid</code> ao método:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">geometry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;dimension&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subtype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;polygon&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">srid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">geography</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;latitude&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subtype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;point&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">srid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4326</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>Os modificadores de coluna <code>isGeometry</code> e <code>projection</code> da gramática do PostgreSQL foram, respetivamente, removidos.</p><p><a name="doctrine-dbal-removal"></a></p><h4 id="remocao-do-doctrine-dbal" tabindex="-1">Remoção do Doctrine DBAL <a class="header-anchor" href="#remocao-do-doctrine-dbal" aria-label="Permalink to &quot;Remoção do Doctrine DBAL&quot;">​</a></h4><p><strong>Probabilidade de ocorrência: Baixa</strong></p><p>A lista a seguir apresenta as classes e métodos relacionados com o DBAL Doctrine que foram removidos. O Laravel não depende mais desse pacote e é desnecessário registrar tipos personalizados de doutrina para criação e alteração adequada dos vários tipos de coluna que exigiam tipos personalizados:</p><ul><li>Propriedade da classe <code>Illuminate\\Database\\Schema\\Builder::$alwaysUsesNativeSchemaOperationsIfPossible</code></li><li>Método <code>Illuminate\\Database\\Schema\\Builder::useNativeSchemaOperationsIfPossible()</code></li><li>Método <code>Illuminate\\\\Database\\\\Connection::usingNativeSchemaOperations()</code></li><li>Método <code>Illuminate\\Database\\Connection::isDoctrineAvailable()</code></li><li>Método <code>Illuminate\\Database\\Connection::getDoctrineConnection()</code></li><li>Método <code>Illuminate\\Database\\Connection::getDoctrineSchemaManager()</code></li><li>Método <code>Illuminate\\Database\\Connection::getDoctrineColumn()</code></li><li>Método <code>Illuminate\\Database\\Connection::registerDoctrineType()</code></li><li>Método <code>Illuminate\\Database\\DatabaseManager::registerDoctrineType()</code></li><li>Diretório <code>Illuminate\\Database\\PDO</code></li><li>Classe <code>Illuminate\\Database\\DBAL\\TimestampType</code></li><li>classe <code>Illuminate\\Database\\Schema\\Grammars\\ChangeColumn</code></li><li>Classe <code>Illuminate\\Database\\Schema\\Grammars\\RenameColumn</code></li><li>método <code>Illuminate\\Database\\Schema\\Grammars\\Grammar::getDoctrineTableDiff()</code></li></ul><p>Além disso, não é mais necessário registrar tipos personalizados Doctrine por meio de <code>dbal.types</code> no arquivo de configuração do seu aplicativo, na pasta &quot;database&quot;.</p><p>Se você estava usando o Doctrine DBAL para inspecionar seu banco de dados e suas tabelas associadas, pode usar agora os novos métodos nativos do Laravel (<code>Schema::getTables()</code>, <code>Schema::getColumns()</code>, <code>Schema::getIndexes()</code>, <code>Schema::getForeignKeys()</code>, etc.).</p><h4 id="metodos-de-esquema-desativados" tabindex="-1">Métodos de Esquema desativados <a class="header-anchor" href="#metodos-de-esquema-desativados" aria-label="Permalink to &quot;Métodos de Esquema desativados&quot;">​</a></h4><p><strong>Probabilidade de impacto: muito baixa</strong></p><p>Os métodos Doctrine suportados obsoletos, <code>Schema::getAllTables()</code>, <code>Schema::getAllViews()</code> e <code>Schema::getAllTypes()</code>, foram removidos em favor dos novos métodos nativos do Laravel: <code>Schema::getTables()</code>, <code>Schema::getViews()</code> e <code>Schema::getTypes()</code>.</p><p>Ao usar o PostgreSQL e o SQL Server, nenhum dos novos métodos de esquema aceitará uma referência com três partes (por exemplo, <code>database.schema.table</code>). Portanto, você deve usar a função <code>connection()</code> para declarar o banco de dados:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Schema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">connection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;database&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;schema.table&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h4 id="metodo-getcolumntype-do-schema-builder" tabindex="-1">Método <code>getColumnType()</code> do Schema Builder <a class="header-anchor" href="#metodo-getcolumntype-do-schema-builder" aria-label="Permalink to &quot;Método \`getColumnType()\` do Schema Builder&quot;">​</a></h4><p><strong>Probabilidade de impacto: muito baixa</strong></p><p>O método <code>Schema::getColumnType()</code> agora sempre retorna o tipo real da coluna indicada, não o tipo equivalente do Doctrine DBAL.</p><h4 id="interface-de-conexao-do-banco-de-dados" tabindex="-1">Interface de conexão do banco de dados <a class="header-anchor" href="#interface-de-conexao-do-banco-de-dados" aria-label="Permalink to &quot;Interface de conexão do banco de dados&quot;">​</a></h4><p><strong>Provável ocorrência de impacto: muito baixo</strong></p><p>A interface <code>Illuminate\\Database\\ConnectionInterface</code> recebeu um novo método <code>scalar</code>. Se você estiver definindo sua própria implementação dessa interface, é preciso adicionar o método <code>scalar</code> à sua implementação.</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> scalar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($query, $bindings </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [], $useReadPdo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="datas" tabindex="-1">Datas <a class="header-anchor" href="#datas" aria-label="Permalink to &quot;Datas&quot;">​</a></h3><h4 id="carbono-3" tabindex="-1">Carbono 3 <a class="header-anchor" href="#carbono-3" aria-label="Permalink to &quot;Carbono 3&quot;">​</a></h4><p><strong>Probabilidade de impacto: média</strong></p><p>O Laravel 11 suporta a biblioteca de manipulação de datas Carbon 2 e Carbon 3. O Carbon é uma biblioteca de manipulação de data utilizada extensivamente pelo Laravel e por pacotes em todo o ecossistema. Se você atualizar para a Carbon 3, tenha cuidado com os métodos <code>diffIn*</code>, que agora retornam números flutuantes e podem retornar valores negativos para indicar o sentido de tempo, o que é uma mudança significativa em relação à Carbon 2. Revise o <a href="https://github.com/briannesbitt/Carbon/releases/tag/3.0.0" target="_blank" rel="noreferrer">registro de alterações</a> dp Carbon para obter informações detalhadas sobre como lidar com essas e outras mudanças.</p><h3 id="e-mail" tabindex="-1">E-mail <a class="header-anchor" href="#e-mail" aria-label="Permalink to &quot;E-mail&quot;">​</a></h3><h4 id="contrato-mailer" tabindex="-1">Contrato <code>Mailer</code> <a class="header-anchor" href="#contrato-mailer" aria-label="Permalink to &quot;Contrato \`Mailer\`&quot;">​</a></h4><p><strong>Probabilidade de impacto: Muito baixa</strong></p><p>O contrato <code>Illuminate\\Contracts\\Mail\\Mailer</code> recebeu um novo método <code>sendNow</code>. Se sua aplicação ou pacote estiver implementando esse contrato manualmente, você deve adicionar o novo método <code>sendNow</code> em sua implementação:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sendNow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($mailable, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [], $callback </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="pacotes" tabindex="-1">Pacotes <a class="header-anchor" href="#pacotes" aria-label="Permalink to &quot;Pacotes&quot;">​</a></h3><h4 id="publicando-providers-em-sua-aplicacao" tabindex="-1">Publicando Providers em sua aplicação <a class="header-anchor" href="#publicando-providers-em-sua-aplicacao" aria-label="Permalink to &quot;Publicando Providers em sua aplicação&quot;">​</a></h4><p><strong>Probabilidade de impacto: muito baixa</strong></p><p>Se você escreveu um pacote do Laravel que publica manualmente um provedor de serviços para o diretório <code>app/Providers</code> do aplicativo e modifica manualmente o arquivo de configuração <code>config/app.php</code> do aplicativo para registrar o provedor de serviços, você deve atualizar seu pacote para utilizar o novo método <code>ServiceProvider::addProviderToBootstrapFile</code>.</p><p>O método <code>addProviderToBootstrapFile</code> adiciona automaticamente o provedor de serviços publicado ao arquivo <code>bootstrap/providers.php</code> do aplicativo, uma vez que a matriz <code>providers</code> não existe no arquivo de configuração <code>config/app.php</code> em novos aplicativos Laravel 11.</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Support\\ServiceProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ServiceProvider</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addProviderToBootstrapFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Provider</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="filas" tabindex="-1">Filas <a class="header-anchor" href="#filas" aria-label="Permalink to &quot;Filas&quot;">​</a></h3><h4 id="a-interface-batchrepository" tabindex="-1">A interface <code>BatchRepository</code> <a class="header-anchor" href="#a-interface-batchrepository" aria-label="Permalink to &quot;A interface \`BatchRepository\`&quot;">​</a></h4><p><strong>Probabilidade de impacto: muito baixa</strong></p><p>A interface <code>Illuminate\\Bus\\BatchRepository</code> recebeu um novo método <code>rollBack</code>. Se você estiver implementando essa interface em seu próprio pacote ou aplicativo, deverá adicionar esse método à sua implementação:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rollBack</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h4 id="trabalhos-sincronos-em-transacoes-de-base-de-dados" tabindex="-1">Trabalhos síncronos em transações de base de dados <a class="header-anchor" href="#trabalhos-sincronos-em-transacoes-de-base-de-dados" aria-label="Permalink to &quot;Trabalhos síncronos em transações de base de dados&quot;">​</a></h4><p><strong>Provável impacto: muito baixo</strong></p><p>Anteriormente, os trabalhos síncronos (usando o driver de fila <code>sync</code>) executavam-se imediatamente, independentemente da configuração da opção <code>after_commit</code> da conexão da fila estiver definida como <code>true</code> ou se o método <code>afterCommit</code> tiver sido invocado na ligação.</p><p>Agora, em Laravel 11, os trabalhos de fila síncronos respeitarão a configuração &quot;after commit&quot; da conexão ou do trabalho de fila.</p><h3 id="limitacao-da-velocidade" tabindex="-1">Limitação da velocidade <a class="header-anchor" href="#limitacao-da-velocidade" aria-label="Permalink to &quot;Limitação da velocidade&quot;">​</a></h3><h4 id="limitacao-de-taxa-por-segundo" tabindex="-1">Limitação de taxa por segundo <a class="header-anchor" href="#limitacao-de-taxa-por-segundo" aria-label="Permalink to &quot;Limitação de taxa por segundo&quot;">​</a></h4><p><strong>Probabilidade de impacto: Média</strong></p><p>O Laravel 11 suporta limitação de taxas por segundo em vez de ser limitado ao minuto. Há uma variedade de possíveis alterações que você deve estar ciente relacionadas a esta mudança.</p><p>O construtor da classe <code>GlobalLimit</code> agora aceita segundos em vez de minutos. Esta classe não está documentada e, normalmente, sua aplicação não a usa:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> GlobalLimit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($attempts, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>Agora, o construtor da classe <code>Limit</code> aceita segundos em vez de minutos. Todos os usos documentados dessa classe são limitados a construtores estáticos, como <code>Limit::perMinute</code> e <code>Limit::perSecond</code>. No entanto, se você estiver instanciando essa classe manualmente, deve atualizar seu aplicativo para fornecer segundos ao construtor da classe:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Limit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($key, $attempts, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>A propriedade <code>decayMinutes</code> da classe <code>Limit</code> foi renomeada para <code>decaySeconds</code> e agora contém segundos em vez de minutos.</p><p>Os construtores de classes <code>Illuminate\\Queue\\Middleware\\ThrottleExceptions</code> e <code>Illuminate\\Queue\\Middleware\\ThrottleExceptionsWithRedis</code>, agora aceitam segundos em vez de minutos.</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ThrottlesExceptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($attempts, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ThrottlesExceptionsWithRedis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($attempts, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="cashier-stripe" tabindex="-1">Cashier Stripe <a class="header-anchor" href="#cashier-stripe" aria-label="Permalink to &quot;Cashier Stripe&quot;">​</a></h3><h4 id="atualizando-o-cashier-stripe" tabindex="-1">Atualizando o Cashier Stripe <a class="header-anchor" href="#atualizando-o-cashier-stripe" aria-label="Permalink to &quot;Atualizando o Cashier Stripe&quot;">​</a></h4><p><strong>Probabilidade de impacto: Alta</strong></p><p>O Laravel 11 não suporta mais o Cashier Stripe 14.x. Portanto, você deve atualizar a dependência do Laravel Cashier Stripe da sua aplicação para &quot;^15.0&quot; em seu arquivo <code>composer.json</code>.</p><p>O Stripe 15.0 não carrega mais automaticamente as migrações do seu diretório de migrações. Em vez disso, você deve executar o comando abaixo para publicar as migrações do Stripe em sua aplicação:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vendor:publish</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tag=cashier-migrations</span></span></code></pre></div><p>Revise o guia de atualização completo do <a href="https://github.com/laravel/cashier-stripe/blob/15.x/UPGRADE.md" target="_blank" rel="noreferrer">Cashier Stripe</a> para obter alterações que possam ter efeitos negativos.</p><h3 id="spark-stripe" tabindex="-1">Spark (Stripe) <a class="header-anchor" href="#spark-stripe" aria-label="Permalink to &quot;Spark (Stripe)&quot;">​</a></h3><h4 id="atualizar-spark-stripe" tabindex="-1">Atualizar Spark Stripe <a class="header-anchor" href="#atualizar-spark-stripe" aria-label="Permalink to &quot;Atualizar Spark Stripe&quot;">​</a></h4><p><strong>Probabilidade de impacto: Alta</strong></p><p>O Laravel 11 não suporta mais o Laravel Spark Stripe 4.x. Por conseguinte, você deve atualizar a dependência do Spark Stripe para <code>^5.0</code> em seu arquivo <code>composer.json</code>.</p><p>O Spark Stripe 5.0 já não carrega automaticamente as migrações do seu próprio diretório de migrações. Em vez disso, deve executar o seguinte comando para publicar as migrações do Spark Stripe no aplicativo:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vendor:publish</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tag=spark-migrations</span></span></code></pre></div><p>Revise o <a href="https://spark.laravel.com/docs/spark-stripe/upgrade.html" target="_blank" rel="noreferrer">guia de atualização do Spark Stripe completo</a> para alterações adicionais.</p><h3 id="passaporte" tabindex="-1">Passaporte <a class="header-anchor" href="#passaporte" aria-label="Permalink to &quot;Passaporte&quot;">​</a></h3><h4 id="atualizar-o-passaporte" tabindex="-1">Atualizar o passaporte <a class="header-anchor" href="#atualizar-o-passaporte" aria-label="Permalink to &quot;Atualizar o passaporte&quot;">​</a></h4><p><strong>Probabilidade de impacto: alta</strong></p><p>O Laravel 11 não suporta mais o Laravel Passport 11.x. Portanto, você deve atualizar a dependência do Laravel Passport de seu aplicativo para <code>^12.0</code> no arquivo <code>composer.json</code>.</p><p>O Passport 12.0 não carrega mais as migrações automaticamente do diretório de migração da sua própria aplicação. Em vez disso, você deve executar o seguinte comando para publicar as migrações do Passport em seu aplicativo:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vendor:publish</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tag=passport-migrations</span></span></code></pre></div><p>Além disso, o tipo de autorização por senha é desativado por padrão. Você pode ativá-lo chamando o método <code>enablePasswordGrant</code> no método <code>boot</code> do seu aplicativo <code>AppServiceProvider</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> boot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    Passport</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">enablePasswordGrant</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="sanctum" tabindex="-1">Sanctum <a class="header-anchor" href="#sanctum" aria-label="Permalink to &quot;Sanctum&quot;">​</a></h3><h4 id="atualizando-o-sanctum" tabindex="-1">Atualizando o Sanctum <a class="header-anchor" href="#atualizando-o-sanctum" aria-label="Permalink to &quot;Atualizando o Sanctum&quot;">​</a></h4><p><strong>Probabilidade de um impacto: elevada</strong></p><p>O Laravel 11 não suporta mais o Laravel Sanctum 3.x. Por conseguinte, você deve atualizar a dependência do Laravel Sanctum de sua aplicação para <code>^4.0</code> em seu arquivo <code>composer.json</code>.</p><p>O Sanctum 4.0 não carrega mais as migrações automaticamente a partir do seu diretório de migração. Em vez disso, você deve executar o comando seguinte para publicar as migrações do Sanctum em sua aplicação:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vendor:publish</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tag=sanctum-migrations</span></span></code></pre></div><p>Em seguida, na pasta de configuração do seu aplicativo, o <code>config/sanctum.php</code>, você deve atualizar as referências às middlewares <code>authenticate_session</code>, <code>encrypt_cookies</code> e <code>validate_csrf_token</code> para a seguinte:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;middleware&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;authenticate_session&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Laravel\\Sanctum\\Http\\Middleware\\AuthenticateSession</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;encrypt_cookies&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Cookie\\Middleware\\EncryptCookies</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;validate_csrf_token&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Foundation\\Http\\Middleware\\ValidateCsrfToken</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span></code></pre></div><h3 id="telescope" tabindex="-1">Telescope <a class="header-anchor" href="#telescope" aria-label="Permalink to &quot;Telescope&quot;">​</a></h3><h4 id="atualizacao-do-telescope" tabindex="-1">Atualização do Telescope <a class="header-anchor" href="#atualizacao-do-telescope" aria-label="Permalink to &quot;Atualização do Telescope&quot;">​</a></h4><p><strong>Provável impacto: Alto</strong></p><p>O Laravel 11 não suporta mais o Laravel Telescope 4.x. Portanto, você deve atualizar a dependência do Telescope Laravel de sua aplicação para <code>^5.0</code> em seu arquivo <code>composer.json</code>.</p><p>O Telescope 5.0 já não carrega automaticamente as migrações do seu próprio diretório de migrações. Em vez disso, deverá executar o comando seguinte para publicar as migrações do Telescópio na sua aplicação:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vendor:publish</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tag=telescope-migrations</span></span></code></pre></div><h3 id="pacote-spatie-once" tabindex="-1">Pacote Spatie Once <a class="header-anchor" href="#pacote-spatie-once" aria-label="Permalink to &quot;Pacote Spatie Once&quot;">​</a></h3><p><strong>Probabilidade de impacto: Média</strong></p><p>O Laravel 11 agora possui sua própria função <a href="/docs/helpers.html#metodo-once"><code>once</code></a> para garantir que um determinado closure seja executado apenas uma vez. Portanto, se a aplicação depender do pacote <code>spatie/once</code>, você deve removê-lo do arquivo <code>composer.json</code> da aplicação para evitar conflitos.</p><h3 id="diversos" tabindex="-1">Diversos <a class="header-anchor" href="#diversos" aria-label="Permalink to &quot;Diversos&quot;">​</a></h3><p>Também o encorajamos a verificar as mudanças no <a href="https://github.com/laravel/laravel" target="_blank" rel="noreferrer">repositório do GitHub de <code>laravel/laravel</code></a>. Apesar das alterações não serem obrigatórias, pode ser interessante manter os ficheiros em sincronia com a aplicação. Algumas destas mudanças são abordadas neste guia de atualização, mas outras, como as alterações nos ficheiros de configuração ou nos comentários, não são. Pode verificar as mudanças facilmente com a <a href="https://github.com/laravel/laravel/compare/10.x...11.x" target="_blank" rel="noreferrer">ferramenta de comparação do GitHub</a> e escolher quais os updates que são importantes para si.</p>`,199),n=[o];function l(p,d,r,h,c,k){return i(),s("div",null,n)}const m=a(t,[["render",l]]);export{g as __pageData,m as default};
