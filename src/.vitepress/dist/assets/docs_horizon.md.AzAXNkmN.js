import{_ as s,c as a,o as i,a4 as e}from"./chunks/framework.nQaBHiNx.js";const n="/assets/horizon-example.BhVIRfTU.png",E=JSON.parse('{"title":"Laravel Horizon","description":"","frontmatter":{},"headers":[],"relativePath":"docs/horizon.md","filePath":"docs/horizon.md"}'),o={name:"docs/horizon.md"},t=e('<h1 id="laravel-horizon" tabindex="-1">Laravel Horizon <a class="header-anchor" href="#laravel-horizon" aria-label="Permalink to &quot;Laravel Horizon&quot;">​</a></h1><p><a name="introduction"></a></p><h2 id="introducao" tabindex="-1">Introdução <a class="header-anchor" href="#introducao" aria-label="Permalink to &quot;Introdução&quot;">​</a></h2><div class="info custom-block"><p class="custom-block-title">NOTA</p><p>Antes de se aprofundar no Laravel Horizon, você deve se familiarizar com os <a href="/docs/queues.html">serviços de fila</a> básicos do Laravel. O Horizon aumenta a fila do Laravel com recursos adicionais que podem ser confusos se você ainda não estiver familiarizado com os recursos básicos de fila oferecidos pelo Laravel.</p></div><p>O <a href="https://github.com/laravel/horizon" target="_blank" rel="noreferrer">Laravel Horizon</a> fornece um belo painel e configuração orientada a código para suas <a href="/docs/queues.html">filas Redis</a> com tecnologia Laravel. O Horizon permite que você monitore facilmente as principais métricas do seu sistema de fila, como rendimento de trabalho, tempo de execução e falhas de trabalho.</p><p>Ao usar o Horizon, toda a configuração do seu trabalhador de fila é armazenada em um único arquivo de configuração simples. Ao definir a configuração do trabalhador do seu aplicativo em um arquivo controlado por versão, você pode facilmente dimensionar ou modificar os trabalhadores de fila do seu aplicativo ao implantar seu aplicativo.</p><img src="'+n+`"><p><a name="installation"></a></p><h2 id="instalacao" tabindex="-1">Instalação <a class="header-anchor" href="#instalacao" aria-label="Permalink to &quot;Instalação&quot;">​</a></h2><div class="warning custom-block"><p class="custom-block-title">ATENÇÃO</p><p>O Laravel Horizon requer que você use <a href="https://redis.io" target="_blank" rel="noreferrer">Redis</a> para alimentar sua fila. Portanto, você deve garantir que sua conexão de fila esteja definida como <code>redis</code> no arquivo de configuração <code>config/queue.php</code> do seu aplicativo.</p></div><p>Você pode instalar o Horizon em seu projeto usando o gerenciador de pacotes do Composer:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> require</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> laravel/horizon</span></span></code></pre></div><p>Após instalar o Horizon, publique seus ativos usando o comando Artisan <code>horizon:install</code>:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> horizon:install</span></span></code></pre></div><p><a name="configuration"></a></p><h3 id="configuracao" tabindex="-1">Configuração <a class="header-anchor" href="#configuracao" aria-label="Permalink to &quot;Configuração&quot;">​</a></h3><p>Após publicar os ativos do Horizon, seu arquivo de configuração principal estará localizado em <code>config/horizon.php</code>. Este arquivo de configuração permite que você configure as opções do queue worker para seu aplicativo. Cada opção de configuração inclui uma descrição de sua finalidade, portanto, certifique-se de explorar completamente este arquivo.</p><div class="warning custom-block"><p class="custom-block-title">ATENÇÃO</p><p>O Horizon usa uma conexão Redis chamada <code>horizon</code> internamente. Este nome de conexão Redis é reservado e não deve ser atribuído a outra conexão Redis no arquivo de configuração <code>database.php</code> ou como o valor da opção <code>use</code> no arquivo de configuração <code>horizon.php</code>.</p></div><p><a name="environments"></a></p><h4 id="ambientes" tabindex="-1">Ambientes <a class="header-anchor" href="#ambientes" aria-label="Permalink to &quot;Ambientes&quot;">​</a></h4><p>Após a instalação, a principal opção de configuração do Horizon com a qual você deve se familiarizar é a opção de configuração <code>environments</code>. Esta opção de configuração é uma matriz de ambientes nos quais seu aplicativo é executado e define as opções de processo de trabalho para cada ambiente. Por padrão, esta entrada contém um ambiente <code>production</code> e <code>local</code>. No entanto, você pode adicionar mais ambientes conforme necessário:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;environments&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;production&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;supervisor-1&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;maxProcesses&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;balanceMaxShift&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;balanceCooldown&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ],</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;local&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;supervisor-1&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;maxProcesses&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span></code></pre></div><p>Você também pode definir um ambiente curinga (<code>*</code>) que será usado quando nenhum outro ambiente correspondente for encontrado:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;environments&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;*&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;supervisor-1&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;maxProcesses&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span></code></pre></div><p>Quando você inicia o Horizon, ele usa as opções de configuração do processo de trabalho para o ambiente em que seu aplicativo está sendo executado. Normalmente, o ambiente é determinado pelo valor da <code>APP_ENV</code> <a href="/docs/configuration.html#determining-the-current-environment">variável de ambiente</a>. Por exemplo, o ambiente padrão <code>local</code> do Horizon é configurado para iniciar três processos de trabalho e equilibrar automaticamente o número de processos de trabalho atribuídos a cada fila. O ambiente padrão <code>production</code> é configurado para iniciar no máximo 10 processos de trabalho e equilibrar automaticamente o número de processos de trabalho atribuídos a cada fila.</p><div class="warning custom-block"><p class="custom-block-title">ATENÇÃO</p><p>Você deve garantir que a parte <code>environments</code> do seu arquivo de configuração <code>horizon</code> contenha uma entrada para cada <a href="/docs/configuration.html#environment-configuration">ambiente</a> no qual você planeja executar o Horizon.</p></div><p><a name="supervisors"></a></p><h4 id="supervisores" tabindex="-1">Supervisores <a class="header-anchor" href="#supervisores" aria-label="Permalink to &quot;Supervisores&quot;">​</a></h4><p>Como você pode ver no arquivo de configuração padrão do Horizon, cada ambiente pode conter um ou mais &quot;supervisores&quot;. Por padrão, o arquivo de configuração define esse supervisor como <code>supervisor-1</code>; no entanto, você é livre para nomear seus supervisores como quiser. Cada supervisor é essencialmente responsável por &quot;supervisionar&quot; um grupo de processos de trabalho e cuida do balanceamento dos processos de trabalho entre as filas.</p><p>Você pode adicionar supervisores adicionais a um determinado ambiente se quiser definir um novo grupo de processos de trabalho que devem ser executados nesse ambiente. Você pode escolher fazer isso se quiser definir uma estratégia de balanceamento diferente ou contagem de processos de trabalho para uma determinada fila usada pelo seu aplicativo.</p><p><a name="maintenance-mode"></a></p><h4 id="modo-de-manutencao" tabindex="-1">Modo de manutenção <a class="header-anchor" href="#modo-de-manutencao" aria-label="Permalink to &quot;Modo de manutenção&quot;">​</a></h4><p>Enquanto seu aplicativo estiver no <a href="/docs/configuration.html#maintenance-mode">modo de manutenção</a>, os trabalhos na fila não serão processados ​​pelo Horizon, a menos que a opção <code>force</code> do supervisor seja definida como <code>true</code> no arquivo de configuração do Horizon:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;environments&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;production&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;supervisor-1&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // ...</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;force&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span></code></pre></div><p><a name="default-values"></a></p><h4 id="valores-padrao" tabindex="-1">Valores padrão <a class="header-anchor" href="#valores-padrao" aria-label="Permalink to &quot;Valores padrão&quot;">​</a></h4><p>No arquivo de configuração padrão do Horizon, você notará uma opção de configuração <code>defaults</code>. Esta opção de configuração especifica os valores padrão para os <a href="#supervisors">supervisores</a> do seu aplicativo. Os valores de configuração padrão do supervisor serão mesclados na configuração do supervisor para cada ambiente, permitindo que você evite repetições desnecessárias ao definir seus supervisores.</p><p><a name="balancing-strategies"></a></p><h3 id="estrategias-de-balanceamento" tabindex="-1">Estratégias de balanceamento <a class="header-anchor" href="#estrategias-de-balanceamento" aria-label="Permalink to &quot;Estratégias de balanceamento&quot;">​</a></h3><p>Ao contrário do sistema de fila padrão do Laravel, o Horizon permite que você escolha entre três estratégias de balanceamento de trabalhadores: <code>simple</code>, <code>auto</code> e <code>false</code>. A estratégia <code>simple</code> divide os trabalhos recebidos uniformemente entre os processos de trabalho:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;balance&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;simple&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span></code></pre></div><p>A estratégia <code>auto</code>, que é o padrão do arquivo de configuração, ajusta o número de processos de trabalho por fila com base na carga de trabalho atual da fila. Por exemplo, se sua fila <code>notifications</code> tiver 1.000 trabalhos pendentes enquanto sua fila <code>render</code> estiver vazia, o Horizon alocará mais trabalhadores para sua fila <code>notifications</code> até que a fila esteja vazia.</p><p>Ao usar a estratégia <code>auto</code>, você pode definir as opções de configuração <code>minProcesses</code> e <code>maxProcesses</code> para controlar o número mínimo e máximo de processos de trabalho que o Horizon deve aumentar e diminuir para:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;environments&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;production&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;supervisor-1&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;connection&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;redis&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;queue&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;default&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;balance&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;auto&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;autoScalingStrategy&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;time&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;minProcesses&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;maxProcesses&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;balanceMaxShift&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;balanceCooldown&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;tries&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span></code></pre></div><p>O valor de configuração <code>autoScalingStrategy</code> determina se o Horizon atribuirá mais processos de trabalho às filas com base na quantidade total de tempo que levará para limpar a fila (estratégia <code>time</code>) ou pelo número total de trabalhos na fila (estratégia <code>size</code>).</p><p>Os valores de configuração <code>balanceMaxShift</code> e <code>balanceCooldown</code> determinam a rapidez com que o Horizon será dimensionado para atender à demanda do trabalho. No exemplo acima, no máximo um novo processo será criado ou destruído a cada três segundos. Você está livre para ajustar esses valores conforme necessário com base nas necessidades do seu aplicativo.</p><p>Quando a opção <code>balance</code> é definida como <code>false</code>, o comportamento padrão do Laravel será usado, em que as filas são processadas na ordem em que são listadas na sua configuração.</p><p><a name="dashboard-authorization"></a></p><h3 id="autorizacao-do-painel" tabindex="-1">Autorização do painel <a class="header-anchor" href="#autorizacao-do-painel" aria-label="Permalink to &quot;Autorização do painel&quot;">​</a></h3><p>O painel do Horizon pode ser acessado pela rota <code>/horizon</code>. Por padrão, você só poderá acessar este painel no ambiente <code>local</code>. No entanto, dentro do seu arquivo <code>app/Providers/HorizonServiceProvider.php</code>, há uma definição de <a href="/docs/authorization.html#gates">portão de autorização</a>. Este portão de autorização controla o acesso ao Horizon em ambientes <strong>não locais</strong>. Você é livre para modificar este portão conforme necessário para restringir o acesso à sua instalação do Horizon:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * Registre o portão Horizon.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * Este portão determina quem pode acessar o Horizon em ambientes não locais.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> gate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        Gate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">define</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;viewHorizon&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $user) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> in_array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">email, [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;taylor@laravel.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p><a name="alternative-authentication-strategies"></a></p><h4 id="estrategias-alternativas-de-autenticacao" tabindex="-1">Estratégias alternativas de autenticação <a class="header-anchor" href="#estrategias-alternativas-de-autenticacao" aria-label="Permalink to &quot;Estratégias alternativas de autenticação&quot;">​</a></h4><p>Lembre-se de que o Laravel injeta automaticamente o usuário autenticado no <em>closure</em> do portão. Se seu aplicativo estiver fornecendo segurança do Horizon por outro método, como restrições de IP, seus usuários do Horizon podem não precisar &quot;fazer login&quot;. Portanto, você precisará alterar a assinatura de <em>closure</em> <code>function (User $user)</code> acima para <code>function (User $user = null)</code> para forçar o Laravel a não exigir autenticação.</p><p><a name="silenced-jobs"></a></p><h3 id="trabalhos-silenciados" tabindex="-1">Trabalhos silenciados <a class="header-anchor" href="#trabalhos-silenciados" aria-label="Permalink to &quot;Trabalhos silenciados&quot;">​</a></h3><p>Às vezes, você pode não estar interessado em visualizar certos trabalhos despachados pelo seu aplicativo ou pacotes de terceiros. Em vez de esses trabalhos ocuparem espaço na sua lista de &quot;Trabalhos concluídos&quot;, você pode silenciá-los. Para começar, adicione o nome da classe do trabalho à opção de configuração <code>silenced</code> no arquivo de configuração <code>horizon</code> do seu aplicativo:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;silenced&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        App\\Jobs\\ProcessPodcast</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span></code></pre></div><p>Alternativamente, o trabalho que você deseja silenciar pode implementar a interface <code>Laravel\\Horizon\\Contracts\\Silenced</code>. Se um trabalho implementar esta interface, ele será silenciado automaticamente, mesmo que não esteja presente no array de configuração <code>silenced</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Laravel\\Horizon\\Contracts\\Silenced</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProcessPodcast</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ShouldQueue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Silenced</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Dispatchable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">InteractsWithQueue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Queueable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SerializesModels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p><a name="upgrading-horizon"></a></p><h2 id="atualizando-o-horizon" tabindex="-1">Atualizando o Horizon <a class="header-anchor" href="#atualizando-o-horizon" aria-label="Permalink to &quot;Atualizando o Horizon&quot;">​</a></h2><p>Ao atualizar para uma nova versão principal do Horizon, é importante que você revise cuidadosamente <a href="https://github.com/laravel/horizon/blob/master/UPGRADE.md" target="_blank" rel="noreferrer">o guia de atualização</a>.</p><p><a name="running-horizon"></a></p><h2 id="executando-o-horizon" tabindex="-1">Executando o Horizon <a class="header-anchor" href="#executando-o-horizon" aria-label="Permalink to &quot;Executando o Horizon&quot;">​</a></h2><p>Depois de configurar seus supervisores e workers no arquivo de configuração <code>config/horizon.php</code> do seu aplicativo, você pode iniciar o Horizon usando o comando Artisan <code>horizon</code>. Este comando único iniciará todos os processos de trabalho configurados para o ambiente atual:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> horizon</span></span></code></pre></div><p>Você pode pausar o processo Horizon e instruí-lo a continuar processando trabalhos usando os comandos Artisan <code>horizon:pause</code> e ​​<code>horizon:continue</code>:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> horizon:pause</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> horizon:continue</span></span></code></pre></div><p>Você também pode pausar e continuar <a href="#supervisors">supervisores</a> Horizon específicos usando os comandos Artisan <code>horizon:pause-supervisor</code> e <code>horizon:continue-supervisor</code>:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> horizon:pause-supervisor</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> supervisor-1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> horizon:continue-supervisor</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> supervisor-1</span></span></code></pre></div><p>Você pode verificar o status atual do processo Horizon usando o comando Artisan <code>horizon:status</code>:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> horizon:status</span></span></code></pre></div><p>Você pode encerrar o processo Horizon normalmente usando o comando Artisan <code>horizon:terminate</code>. Todos os trabalhos que estão sendo processados ​​atualmente serão concluídos e o Horizon parará de executar:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> horizon:terminate</span></span></code></pre></div><p><a name="deploying-horizon"></a></p><h3 id="implantando-o-horizon" tabindex="-1">Implantando o Horizon <a class="header-anchor" href="#implantando-o-horizon" aria-label="Permalink to &quot;Implantando o Horizon&quot;">​</a></h3><p>Quando estiver pronto para implantar o Horizon no servidor real do seu aplicativo, você deve configurar um monitor de processo para monitorar o comando <code>php artisan horizon</code> e reiniciá-lo se ele sair inesperadamente. Não se preocupe, discutiremos como instalar um monitor de processo abaixo.</p><p>Durante o processo de implantação do seu aplicativo, você deve instruir o processo do Horizon a encerrar para que ele seja reiniciado pelo seu monitor de processo e receba suas alterações de código:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> horizon:terminate</span></span></code></pre></div><p><a name="installing-supervisor"></a></p><h4 id="instalando-o-supervisor" tabindex="-1">Instalando o Supervisor <a class="header-anchor" href="#instalando-o-supervisor" aria-label="Permalink to &quot;Instalando o Supervisor&quot;">​</a></h4><p>O Supervisor é um monitor de processo para o sistema operacional Linux e reiniciará automaticamente seu processo <code>horizon</code> se ele parar de executar. Para instalar o Supervisor no Ubuntu, você pode usar o seguinte comando. Se você não estiver usando o Ubuntu, provavelmente poderá instalar o Supervisor usando o gerenciador de pacotes do seu sistema operacional:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> supervisor</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">NOTA</p><p>Se configurar o Supervisor sozinho parece complicado, considere usar o <a href="https://forge.laravel.com" target="_blank" rel="noreferrer">Laravel Forge</a>, que instalará e configurará o Supervisor automaticamente para seus projetos Laravel.</p></div><p><a name="supervisor-configuration"></a></p><h4 id="configuracao-do-supervisor" tabindex="-1">Configuração do Supervisor <a class="header-anchor" href="#configuracao-do-supervisor" aria-label="Permalink to &quot;Configuração do Supervisor&quot;">​</a></h4><p>Os arquivos de configuração do Supervisor são normalmente armazenados no diretório <code>/etc/supervisor/conf.d</code> do seu servidor. Dentro deste diretório, você pode criar qualquer número de arquivos de configuração que instruem o supervisor sobre como seus processos devem ser monitorados. Por exemplo, vamos criar um arquivo <code>horizon.conf</code> que inicia e monitora um processo <code>horizon</code>:</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[program:horizon]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">process_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=%(program_name)s</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=php /home/forge/example.com/artisan horizon</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">autostart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=true</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">autorestart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=true</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=forge</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">redirect_stderr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=true</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">stdout_logfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=/home/forge/example.com/horizon.log</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">stopwaitsecs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=3600</span></span></code></pre></div><p>Ao definir sua configuração do Supervisor, você deve garantir que o valor de <code>stopwaitsecs</code> seja maior que o número de segundos consumidos pelo seu trabalho de execução mais longa. Caso contrário, o Supervisor pode encerrar o trabalho antes que ele termine o processamento.</p><div class="warning custom-block"><p class="custom-block-title">ATENÇÃO</p><p>Embora os exemplos acima sejam válidos para servidores baseados em Ubuntu, o local e a extensão de arquivo esperados dos arquivos de configuração do Supervisor podem variar entre outros sistemas operacionais de servidor. Consulte a documentação do seu servidor para obter mais informações.</p></div><p><a name="starting-supervisor"></a></p><h4 id="iniciando-o-supervisor" tabindex="-1">Iniciando o Supervisor <a class="header-anchor" href="#iniciando-o-supervisor" aria-label="Permalink to &quot;Iniciando o Supervisor&quot;">​</a></h4><p>Depois que o arquivo de configuração for criado, você pode atualizar a configuração do Supervisor e iniciar os processos monitorados usando os seguintes comandos:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> supervisorctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reread</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> supervisorctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> supervisorctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> horizon</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">NOTA</p><p>Para obter mais informações sobre como executar o Supervisor, consulte a <a href="http://supervisord.org/index.html" target="_blank" rel="noreferrer">documentação do Supervisor</a>.</p></div><p><a name="tags"></a></p><h2 id="tags" tabindex="-1">Tags <a class="header-anchor" href="#tags" aria-label="Permalink to &quot;Tags&quot;">​</a></h2><p>O Horizon permite que você atribua &quot;tags&quot; a trabalhos, incluindo mailables, eventos de transmissão, notificações e ouvintes de eventos em fila. Na verdade, o Horizon marcará de forma inteligente e automática a maioria dos trabalhos, dependendo dos modelos Eloquent anexados ao trabalho. Por exemplo, dê uma olhada no seguinte trabalho:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> App\\Jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> App\\Models\\Video</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Bus\\Queueable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Contracts\\Queue\\ShouldQueue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Foundation\\Bus\\Dispatchable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Queue\\InteractsWithQueue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Queue\\SerializesModels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RenderVideo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ShouldQueue</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Dispatchable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">InteractsWithQueue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Queueable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SerializesModels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * Crie uma nova instância de trabalho.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __construct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            public</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Video</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $video,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ) {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * Execute o trabalho.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>Se este trabalho for enfileirado com uma instância <code>App\\Models\\Video</code> que tenha um atributo <code>id</code> de <code>1</code>, ele receberá automaticamente a tag <code>App\\Models\\Video:1</code>. Isso ocorre porque o Horizon pesquisará as propriedades do trabalho para quaisquer modelos Eloquent. Se modelos Eloquent forem encontrados, o Horizon marcará o trabalho de forma inteligente usando o nome da classe e a chave primária do modelo:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> App\\Jobs\\RenderVideo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> App\\Models\\Video</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $video </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Video</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    RenderVideo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dispatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($video);</span></span></code></pre></div><p><a name="manually-tagging-jobs"></a></p><h4 id="marcando-trabalhos-manualmente" tabindex="-1">Marcando trabalhos manualmente <a class="header-anchor" href="#marcando-trabalhos-manualmente" aria-label="Permalink to &quot;Marcando trabalhos manualmente&quot;">​</a></h4><p>Se você quiser definir manualmente as tags para um dos seus objetos que podem ser enfileirados, você pode definir um método <code>tags</code> na classe:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RenderVideo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ShouldQueue</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * Obtenha as tags que devem ser atribuídas ao trabalho.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> array</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">, string&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> array</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;render&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;video:&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">video</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p><a name="manually-tagging-event-listeners"></a></p><h4 id="marcando-manualmente-ouvintes-de-eventos" tabindex="-1">Marcando manualmente ouvintes de eventos <a class="header-anchor" href="#marcando-manualmente-ouvintes-de-eventos" aria-label="Permalink to &quot;Marcando manualmente ouvintes de eventos&quot;">​</a></h4><p>Ao recuperar as tags para um ouvinte de eventos enfileirado, o Horizon passará automaticamente a instância do evento para o método <code>tags</code>, permitindo que você adicione dados de eventos às tags:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SendRenderNotifications</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ShouldQueue</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * Obtenha as tags que devem ser atribuídas ao ouvinte.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> array</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">, string&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VideoRendered</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $event)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> array</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;video:&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">video</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p><a name="notifications"></a></p><h2 id="notificacoes" tabindex="-1">Notificações <a class="header-anchor" href="#notificacoes" aria-label="Permalink to &quot;Notificações&quot;">​</a></h2><div class="warning custom-block"><p class="custom-block-title">ATENÇÃO</p><p>Ao configurar o Horizon para enviar notificações do Slack ou SMS, você deve revisar os <a href="/docs/notifications.html">pré-requisitos para o canal de notificação relevante</a>.</p></div><p>Se você quiser ser notificado quando uma de suas filas tiver um longo tempo de espera, você pode usar os métodos <code>Horizon::routeMailNotificationsTo</code>, <code>Horizon::routeSlackNotificationsTo</code> e <code>Horizon::routeSmsNotificationsTo</code>. Você pode chamar esses métodos do método <code>boot</code> do <code>App\\Providers\\HorizonServiceProvider</code> do seu aplicativo:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * Inicialize qualquer serviço de aplicativo.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> boot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        parent::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">boot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        Horizon</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">routeSmsNotificationsTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;15556667777&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        Horizon</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">routeMailNotificationsTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;example@example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        Horizon</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">routeSlackNotificationsTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;slack-webhook-url&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#channel&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p><a name="configuring-notification-wait-time-thresholds"></a></p><h4 id="configurando-limites-de-tempo-de-espera-de-notificacao" tabindex="-1">Configurando Limites de Tempo de Espera de Notificação <a class="header-anchor" href="#configurando-limites-de-tempo-de-espera-de-notificacao" aria-label="Permalink to &quot;Configurando Limites de Tempo de Espera de Notificação&quot;">​</a></h4><p>Você pode configurar quantos segundos são considerados uma &quot;longa espera&quot; no arquivo de configuração <code>config/horizon.php</code> do seu aplicativo. A opção de configuração <code>waits</code> dentro deste arquivo permite que você controle o limite de espera longa para cada combinação de conexão/fila. Qualquer combinação de conexão/fila indefinida terá como padrão um limite de espera longa de 60 segundos:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;waits&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;redis:critical&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;redis:default&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;redis:batch&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 120</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span></code></pre></div><p><a name="metrics"></a></p><h2 id="metricas" tabindex="-1">Métricas <a class="header-anchor" href="#metricas" aria-label="Permalink to &quot;Métricas&quot;">​</a></h2><p>O Horizon inclui um painel de métricas que fornece informações sobre seus tempos de espera de trabalho e fila e rendimento. Para preencher este painel, você deve configurar o comando Artisan <code>snapshot</code> do Horizon para ser executado a cada cinco minutos no arquivo <code>routes/console.php</code> do seu aplicativo:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Support\\Facades\\Schedule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    Schedule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;horizon:snapshot&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">everyFiveMinutes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p><a name="deleting-failed-jobs"></a></p><h2 id="excluindo-trabalhos-com-falha" tabindex="-1">Excluindo trabalhos com falha <a class="header-anchor" href="#excluindo-trabalhos-com-falha" aria-label="Permalink to &quot;Excluindo trabalhos com falha&quot;">​</a></h2><p>Se você quiser excluir um trabalho com falha, pode usar o comando <code>horizon:forget</code>. O comando <code>horizon:forget</code> aceita o ID ou UUID do trabalho com falha como seu único argumento:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> horizon:forget</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span></span></code></pre></div><p><a name="clearing-jobs-from-queues"></a></p><h2 id="limpando-trabalhos-de-filas" tabindex="-1">Limpando trabalhos de filas <a class="header-anchor" href="#limpando-trabalhos-de-filas" aria-label="Permalink to &quot;Limpando trabalhos de filas&quot;">​</a></h2><p>Se você quiser excluir todos os trabalhos da fila padrão do seu aplicativo, você pode fazer isso usando o comando Artisan <code>horizon:clear</code>:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> horizon:clear</span></span></code></pre></div><p>Você pode fornecer a opção <code>queue</code> para excluir trabalhos de uma fila específica:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> horizon:clear</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --queue=emails</span></span></code></pre></div>`,133),p=[t];function l(h,r,d,k,c,u){return i(),a("div",null,p)}const m=s(o,[["render",l]]);export{E as __pageData,m as default};
