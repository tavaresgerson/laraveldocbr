import{_ as s,c as a,o as i,a4 as e}from"./chunks/framework.nQaBHiNx.js";const g=JSON.parse('{"title":"Autenticação","description":"","frontmatter":{},"headers":[],"relativePath":"docs/authentication.md","filePath":"docs/authentication.md"}'),n={name:"docs/authentication.md"},t=e(`<h1 id="autenticacao" tabindex="-1">Autenticação <a class="header-anchor" href="#autenticacao" aria-label="Permalink to &quot;Autenticação&quot;">​</a></h1><h2 id="introducao" tabindex="-1">Introdução <a class="header-anchor" href="#introducao" aria-label="Permalink to &quot;Introdução&quot;">​</a></h2><p>Muitos aplicativos da Web permitem que os usuários autentiquem-se com o aplicativo e façam o &quot;login&quot;. Implementar esse recurso em aplicativos da Web pode ser um procedimento complexo e, potencialmente arriscado. Por essa razão, Laravel procura fornecer ferramentas necessárias para que você possa implementar a autenticação de maneira rápida, segura e fácil.</p><p>No seu núcleo, as funções de autenticação do Laravel são compostas por &quot;guard&quot; e &quot;providers&quot;. Os &quot;guards&quot; definem como os usuários são autenticados em cada solicitação. Por exemplo, o Laravel utiliza um guard denominado <code>session</code>, que mantém o estado utilizando armazenamento de sessões e cookies.</p><p>Os provedores definem como os usuários são recuperados de seu armazenamento persistente. O Laravel oferece suporte para a recuperação de usuários com <a href="https://laravel.com/docs/eloquent" target="_blank" rel="noreferrer">Eloquent</a> e o gerenciador de consultas do banco de dados, mas você tem liberdade para definir provedores adicionais conforme necessário para sua aplicação.</p><p>O arquivo para configuração de autenticação do seu aplicativo está localizado em <code>config/auth.php</code>. Este arquivo contém várias opções bem documentadas para ajustar o comportamento dos serviços de autenticação do Laravel.</p><div class="warning custom-block"><p class="custom-block-title">ATENÇÃO</p><p><a href="/docs/authorization.html">Documentação de autorização</a>.</p></div><h3 id="kits-de-iniciacao" tabindex="-1">Kits de Iniciação <a class="header-anchor" href="#kits-de-iniciacao" aria-label="Permalink to &quot;Kits de Iniciação&quot;">​</a></h3><p>Quer começar rápido? Instale um <a href="/docs/starter-kits.html">kit inicial de aplicativos Laravel</a> em uma nova aplicação do Laravel. Depois que sua base de dados for migrada, navegue pelo seu browser até o endereço <code>/register</code> ou qualquer outro URL atribuído à sua aplicação. Os kits iniciais cuidarão da criação do sistema de autenticação!</p><p><strong>Se você optar por não usar um kit de iniciação em seu aplicativo final do Laravel, instalar o kit de inicialização <a href="/docs/starter-kits.html#laravel-breeze">Laravel Breeze</a> pode ser uma excelente oportunidade para aprender a implementar todas as funcionalidades de autenticação do Laravel em um projeto real.</strong> Como o Laravel Breeze cria controladores, rotas e exibições de autenticação para você, é possível examinar o código dentro desses arquivos para aprender como as características de autenticação do Laravel podem ser implementadas.</p><h3 id="consideracoes-da-base-de-dados" tabindex="-1">Considerações da base de dados <a class="header-anchor" href="#consideracoes-da-base-de-dados" aria-label="Permalink to &quot;Considerações da base de dados&quot;">​</a></h3><p>De maneira padrão, o Laravel inclui um modelo <code>App\\Models\\User</code> <a href="/docs/eloquent.html">Model Eloquent</a> em seu diretório <code>app/Models</code>. Esse modelo pode ser utilizado com o driver de autenticação padrão do Eloquent. Se a sua aplicação não estiver utilizando o Eloquent, é possível usar o provedor de autenticação <code>database</code>, que utiliza o gerador de consultas do Laravel.</p><p>Ao criar o esquema de banco de dados do modelo <code>App\\Models\\User</code>, certifique-se que a coluna <code>password</code> tem, no mínimo, 60 caracteres. É claro que a migração da tabela <code>users</code>, incluída em novos aplicativos Laravel já cria uma coluna que excede este comprimento.</p><p>Além disso, você deve verificar se sua tabela <code>users</code> (ou equivalente) contém uma coluna <code>remember_token</code> de 100 caracteres, que pode ser nula. Essa coluna será usada para armazenar um token para os usuários que selecionarem a opção &quot;lembrar-me&quot; quando efetuarem o login em sua aplicação. Novamente, a migração padrão da tabela <code>users</code>, incluída nas novas aplicações do Laravel, já contém essa coluna.</p><h3 id="visao-geral-do-ecossistema" tabindex="-1">Visão Geral do Ecossistema <a class="header-anchor" href="#visao-geral-do-ecossistema" aria-label="Permalink to &quot;Visão Geral do Ecossistema&quot;">​</a></h3><p>O Laravel oferece vários pacotes relacionados com autenticação. Antes de continuar, revisaremos o ecossistema geral de autenticação no Laravel e discutiremos a finalidade pretendida de cada pacote.</p><p>Primeiro, considere como a autenticação funciona. Quando se utiliza um navegador da Web, o utilizador fornece o nome de utilizador e palavra-passe através do formulário de login. Se estas credenciais estiverem corretas, a aplicação armazena informações sobre o utilizador autenticado na sessão do utilizador. Um cookie emitido ao navegador contém o identificador da sessão, para que os pedidos subsequentes à aplicação possam associar o utilizador à sessão correta. Depois de receber o cookie, a aplicação recupera os dados da sessão com base no identificador da sessão e regista que as informações de autenticação foram armazenadas e considera o utilizador como &quot;autenticado&quot;.</p><p>Quando um serviço remoto necessita se autenticar para aceder a uma API, os cookies não são normalmente utilizados como autenticação porque não há nenhum browser da Web. Em vez disso, o serviço remoto envia um token API para a API em cada requisição. A aplicação pode validar o token de entrada contra uma tabela de tokens de API válidos e &quot;autenticar&quot; o pedido como sendo realizado pelo utilizador associado ao referido token.</p><h4 id="servicos-de-autenticacao-de-navegador-incorporados-no-laravel" tabindex="-1">Serviços de Autenticação de Navegador Incorporados no Laravel <a class="header-anchor" href="#servicos-de-autenticacao-de-navegador-incorporados-no-laravel" aria-label="Permalink to &quot;Serviços de Autenticação de Navegador Incorporados no Laravel&quot;">​</a></h4><p>O Laravel inclui serviços de autenticação e sessão embutidos que são acessados tipicamente através dos facades <code>Auth</code> e <code>Session</code>. Estes recursos fornecem autenticação baseada em cookies para pedidos iniciados a partir de navegadores da Web. Estes fornecem métodos que permitem verificar os dados de credenciais do usuário e autenticá-lo. Além disso, estes serviços armazenam automaticamente os dados de autenticação adequados na sessão do usuário e emitem o cookie da sessão do usuário. Uma discussão sobre como usar estes serviços está incluída nesta documentação.</p><p><strong>Kits de iniciação de aplicativos</strong></p><p>Como discutido nesta documentação, você pode interagir com esses serviços de autenticação manualmente para construir a própria camada de autenticação do seu aplicativo. No entanto, para ajudá-lo a começar mais rapidamente, lançamos <a href="/docs/starter-kits.html">pacotes livres</a> que fornecem um robusto e moderna moldura da camada inteira de autenticação. Estes pacotes são <a href="/docs/starter-kits.html#laravel-breeze">Laravel Breeze</a>, <a href="/docs/starter-kits.html#laravel-jetstream">Laravel Jetstream</a> e <a href="/docs/fortify.html">Laravel Fortify</a>.</p><p>O <em>Laravel Breeze</em> é uma implementação simples e mínima de todas as funções de autenticação do Laravel, incluindo login, registro, redefinição da senha, confirmação por e-mail e confirmação de senha. A camada de visualização do <em>Laravel Breeze</em> é composta por <a href="/docs/blade.html">modelos Blade</a> simples e estilizados com o <a href="https://tailwindcss.com" target="_blank" rel="noreferrer">Tailwind CSS</a>. Para começar, consulte a documentação em <em>kit de início da aplicação do Laravel</em> (/docs/starter-kits).</p><p><em>Laravel Fortify</em> é um servidor de autenticação desprovido de cabeçalho para Laravel que implementa muitas das funcionalidades encontradas nesta documentação, incluindo autenticação com base em cookie, bem como outras funções, tais como autenticação por dois fatores e verificação por correio eletrónico. Fortify fornece o servidor de autenticação para Laravel Jetstream ou pode ser utilizado de forma independente em combinação com o <a href="/docs/sanctum.html">Laravel Sanctum</a> para fornecer autenticação a uma aplicação web que precisa de se autenticar no Laravel.</p><p>O <em><a href="https://jetstream.laravel.com" target="_blank" rel="noreferrer">Jetstream Laravel</a></em> é um kit iniciante robusto para aplicações que consome e expõe os serviços de autenticação do Laravel Fortify com uma interface gráfica moderna e bonita, alimentada pelo <a href="https://tailwindcss.com" target="_blank" rel="noreferrer">Tailwind CSS</a>, o <a href="https://livewire.laravel.com" target="_blank" rel="noreferrer">Livewire</a> e/ou o <a href="https://inertiajs.com" target="_blank" rel="noreferrer">Inertia</a>. O Jetstream Laravel inclui suporte opcional para autenticação por dois fatores, suporte a equipes, gestão de sessões em navegadores, gestão de perfis e integração interna com o <a href="/docs/sanctum.html">Laravel Sanctum</a> para oferecer a autenticação através do token API. As ofertas da Laravel para autenticação API são discutidas abaixo.</p><h4 id="servicos-de-autenticacao-da-api-do-laravel" tabindex="-1">Serviços de autenticação da API do Laravel <a class="header-anchor" href="#servicos-de-autenticacao-da-api-do-laravel" aria-label="Permalink to &quot;Serviços de autenticação da API do Laravel&quot;">​</a></h4><p>O Laravel fornece dois pacotes opcionais para ajudá-lo a gerenciar tokens de API e autenticar solicitações feitas com tokens de API: <a href="/docs/passport.html">Passport</a> e <a href="/docs/sanctum.html">Sanctum</a>. Tenha atenção que essas bibliotecas e os serviços internos do Laravel para autenticação baseada em cookies não são mutuamente exclusivas. Essas bibliotecas se concentram principalmente na autenticação com tokens de API, ao passo que os serviços internos de autenticação do Laravel se concentram em autenticação por meio de cookies nos navegadores. Muitas aplicações usarão ambos: a autenticação baseada em cookies e um dos pacotes de autenticação da API do Laravel.</p><p><strong>Passport</strong></p><p>O Passport é um provedor de autenticação OAuth2 que oferece uma variedade de &quot;tipos de concessão&quot; (grant types) OAuth2, permitindo a emissão de vários tipos de tokens. Em geral, esse pacote é robusto e complexo para autenticação de API. No entanto, a maioria das aplicações não requer as características complexas oferecidas pelo especificação OAuth2, o que pode confundir tanto os usuários quanto os desenvolvedores. Além disso, os desenvolvedores têm sido historicamente confundidos sobre como autenticar aplicativos SPA ou aplicativos móveis usando provedores de autenticação OAuth2 como Passport.</p><p><strong>Sanctum</strong></p><p>Em resposta à complexidade do OAuth2 e à confusão dos desenvolvedores, pretendemos criar um pacote de autenticação mais simples e simplificado que possa lidar tanto com solicitações Web de primeira parte de um navegador web como solicitações API via tokens. Este objetivo foi atingido com a versão <a href="/docs/sanctum.html">Laravel Sanctum</a>, que deve ser considerada o pacote de autenticação preferencial e recomendado para aplicações que disponibilizam uma UI Web de primeira parte, além de terem solicitações API ou são alimentadas por um aplicativo (SPA) com página única que existe separadamente do aplicativo Laravel de fundo ou aplicações que oferecem um cliente móvel.</p><p>O Laravel Sanctum é um pacote híbrido de autenticação da Web/API que pode gerir todo o processo de autenticação do seu aplicativo. Isso é possível porque, quando as aplicações baseadas no Sanctum recebem uma solicitação, o Sanctum primeiro determinará se a solicitação inclui um cookie de sessão que faça referência a uma sessão autenticada. O Sanctum consegue isso chamando os serviços de autenticação internos do Laravel que falamos mais cedo. Se a solicitação não estiver sendo autenticada por meio de um cookie de sessão, o Sanctum inspecionará a solicitação para se certificar de que há um token de API. Se houver um token de API presente, o Sanctum autentica a solicitação usando esse token. Para saber mais sobre este processo, consulte a documentação <a href="/docs/sanctum.html">&quot;como funciona&quot;</a>.</p><p>O Laravel Sanctum é o pacote de API que escolhemos incluir no <a href="https://jetstream.laravel.com" target="_blank" rel="noreferrer">Kit de inicialização do Jetstream Laravel</a> porque acreditamos que é a melhor opção para as principais necessidades de autenticação das aplicações Web.</p><h4 id="resumo-e-escolha-do-seu-conjunto" tabindex="-1">Resumo e escolha do seu conjunto <a class="header-anchor" href="#resumo-e-escolha-do-seu-conjunto" aria-label="Permalink to &quot;Resumo e escolha do seu conjunto&quot;">​</a></h4><p>Em suma, se o seu aplicativo for acessado por meio de um navegador e estiver desenvolvendo uma aplicação monolítica em Laravel, os serviços de autenticação incorporados do Laravel serão usados pelo seu aplicativo.</p><p>Em seguida, se o seu aplicativo oferecer uma API que será consumida por terceiros, escolha entre <a href="/docs/passport.html">Passport</a> ou <a href="/docs/sanctum.html">Sanctum</a> para fornecer autenticação de tokens de API para o seu aplicativo. Em geral, recomendamos o Sanctum quando possível, uma vez que é uma solução completa simples para autenticação de API, SPA e mobile, incluindo suporte para &quot;escopos&quot; ou &quot;habilidades&quot;.</p><p>Se você estiver criando um aplicativo de uma página que será alimentado por um backend do Laravel, deve usar o <a href="/docs/sanctum.html">Laravel Sanctum</a>. Ao usar o Sanctum, será necessário implementar manualmente as próprias rotas de autenticação do backend (<a href="https://laravel.com/docs/sanctum#authenticating-users" target="_blank" rel="noreferrer">autentificação de usuários</a>) ou utilizar <a href="https://laravel.com/docs/fortify" target="_blank" rel="noreferrer">Laravel Fortify</a> como um serviço de autenticação sem cabeçalho que fornece rotas e controladores para recursos, tais como registro, redefinição de senha, verificação de email e outros.</p><p>É possível escolher o tipo de autenticação passo a passo quando o aplicativo exige todas as funcionalidades fornecidas pela especificação OAuth2.</p><p>Além disso, se você deseja começar o mais rápido possível, nós recomendamos <a href="/docs/starter-kits.html#laravel-breeze">Laravel Breeze</a> como uma forma rápida de iniciar um novo aplicativo Laravel que já utiliza a pilha de autenticação preferencial do Laravel, com os serviços internos de autenticação e o Laravel Sanctum.</p><h2 id="inicializacao-rapida-da-autenticacao" tabindex="-1">Inicialização rápida da autenticação <a class="header-anchor" href="#inicializacao-rapida-da-autenticacao" aria-label="Permalink to &quot;Inicialização rápida da autenticação&quot;">​</a></h2><div class="info custom-block"><p class="custom-block-title">AVISO</p><p>Esta parte da documentação discute a autenticação de usuários por meio dos <a href="/docs/starter-kits.html">kits iniciais de aplicativos Laravel</a>, que incluem estrutura de UI para ajudá-lo a começar rapidamente. Se você gostaria de integrar diretamente com os sistemas de autenticação do Laravel, verifique a documentação em <a href="#autenticacao-manual-de-usuarios">autenticando usuários manualmente</a>.</p></div><h3 id="instale-um-kit-inicial" tabindex="-1">Instale um kit inicial <a class="header-anchor" href="#instale-um-kit-inicial" aria-label="Permalink to &quot;Instale um kit inicial&quot;">​</a></h3><p>Primeiro, você deve <a href="/docs/starter-kits.html">instalar um kit de inicialização do Laravel</a>. Nossos atuais kits de inicialização, o Laravel Breeze e o Laravel Jetstream, oferecem pontos de partida com designs bonitos para incorporação da autenticação às suas novas aplicações do Laravel.</p><p>O Laravel Breeze é uma implementação simples e mínima de todos os recursos de autenticação do Laravel, incluindo login, registro, redefinição da senha, verificação por email e confirmação de senha. A camada de visualização do Laravel Breeze é composta por modelos simples <a href="/docs/blade.html">Templates Blade</a> formatados com o <a href="https://tailwindcss.com" target="_blank" rel="noreferrer">Tailwind CSS</a>. Além disso, o Breeze oferece opções de scaffolding baseadas no Livewire ou Inertia, com a opção de usar Vue ou React para o scaffolding baseado na Inertia.</p><p>O <a href="https://jetstream.laravel.com" target="_blank" rel="noreferrer">Laravel Jetstream</a> é um kit de inicialização de aplicação mais robusto que inclui suporte para a construção da sua aplicação com <a href="https://livewire.laravel.com" target="_blank" rel="noreferrer">Livewire</a> ou <a href="https://inertiajs.com" target="_blank" rel="noreferrer">Inertia e Vue</a>. Além disso, o Jetstream oferece um suporte opcional para autenticação em duas etapas, equipe, gestão de perfil, gestão de sessões de navegador, suporte a API através do <a href="/docs/sanctum.html">Laravel Sanctum</a>, exclusão de contas e muito mais.</p><h3 id="recuperando-o-utilizador-autenticado" tabindex="-1">Recuperando o utilizador autenticado <a class="header-anchor" href="#recuperando-o-utilizador-autenticado" aria-label="Permalink to &quot;Recuperando o utilizador autenticado&quot;">​</a></h3><p>Depois de instalar um kit inicial de autenticação e permitir que os usuários se registrem e façam a sua autenticação com a aplicação, será necessário interagir com o utilizador atualmente autenticado. Enquanto processa uma requisição recebida, poderá aceder ao utilizador autenticado através do método <code>user</code> da interface facade <code>Auth</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Support\\Facades\\Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Recuperar o usuário atualmente autenticado...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Recuperar o ID do usuário atualmente autenticado...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p>Como alternativa, quando um usuário estiver autenticado, você poderá acessar o usuário autenticado por meio de uma instância do tipo <code>Illuminate\\Http\\Request</code>. Lembre-se que as classes com tipagem são injetadas automaticamente nos métodos do seu controlador. Ao indicar o objeto <code>Illuminate\\Http\\Request</code>, você poderá obter acesso conveniente ao usuário autenticado em qualquer método do controlador da sua aplicação por meio do método <code>user</code> na requisição:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> App\\Http\\Controllers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Http\\RedirectResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Http\\Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FlightController</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Controller</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * Atualize as informações de voo de um voo existente.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $request)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> RedirectResponse</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> redirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/flights&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="determinar-se-o-usuario-atual-esta-autenticado" tabindex="-1">Determinar se o usuário atual está autenticado <a class="header-anchor" href="#determinar-se-o-usuario-atual-esta-autenticado" aria-label="Permalink to &quot;Determinar se o usuário atual está autenticado&quot;">​</a></h4><p>Para determinar se o usuário que fez a solicitação HTTP é autenticado, você pode usar o método <code>check</code> da facade <code>Auth</code>. Este método retornará <code>true</code> caso o usuário esteja autenticado:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Support\\Facades\\Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">check</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // O usuário está logado...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">ATENÇÃO</p><p>Mesmo que seja possível determinar se um usuário está autenticado usando o método <code>check</code>, você normalmente usará um middleware para verificar se o usuário está autenticado antes de permitir o acesso do usuário a determinadas rotas/controladores. Para saber mais sobre isso, confira a documentação sobre como <a href="/docs/authentication.html#proteger-as-rotas">proteger rotas</a>.</p></div><h3 id="proteger-as-rotas" tabindex="-1">Proteger as Rotas <a class="header-anchor" href="#proteger-as-rotas" aria-label="Permalink to &quot;Proteger as Rotas&quot;">​</a></h3><p><a href="/docs/middleware.html">Middleware de rotas</a> pode ser usado para permitir que somente usuários autenticados tenham acesso a uma determinada rota. O Laravel é fornecido com o <code>auth</code> middleware, que é um <a href="/docs/middleware.html#middleware-alias">alias de middleware</a> para a classe <code>Illuminate\\Auth\\Middleware\\Authenticate</code>. Uma vez que este middleware já está internamente mapeado pelo Laravel, tudo que você precisa fazer é anexar o middleware à uma definição de rota:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/flights&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Somente usuários autenticados podem acessar esta rota...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">middleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;auth&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h4 id="redirecionar-usuarios-nao-autorizados" tabindex="-1">Redirecionar usuários não autorizados <a class="header-anchor" href="#redirecionar-usuarios-nao-autorizados" aria-label="Permalink to &quot;Redirecionar usuários não autorizados&quot;">​</a></h4><p>Quando o middleware <code>auth</code> detecta um usuário não autenticado, ele redirecionará o usuário para a rota com nome <a href="/docs/routing.html#named-routes">&quot;login&quot;</a>. É possível alterar este comportamento usando a método <code>redirectGuestsTo</code> do arquivo de inicialização da aplicação <code>bootstrap/app.php</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Http\\Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withMiddleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Middleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $middleware) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $middleware</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redirectGuestsTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/login&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Usando uma closure...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $middleware</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redirectGuestsTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $request) =&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">route</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;login&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h4 id="especificando-um-guarda" tabindex="-1">Especificando um guarda <a class="header-anchor" href="#especificando-um-guarda" aria-label="Permalink to &quot;Especificando um guarda&quot;">​</a></h4><p>Ao anexar o middleware <code>auth</code> a uma rota, você também pode especificar qual &quot;guard&quot; (proteção) deve ser usada para autenticar o usuário. A guarda especificada deve corresponder a uma das chaves na matriz <code>guards</code> de seu arquivo de configuração do <code>auth.php</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/flights&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Somente usuários autenticados podem acessar esta rota...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">middleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;auth:admin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="limitacao-de-login" tabindex="-1">Limitação de login <a class="header-anchor" href="#limitacao-de-login" aria-label="Permalink to &quot;Limitação de login&quot;">​</a></h3><p>Se você estiver usando os kits de inicialização Laravel Breeze ou Laravel Jetstream, a limitação de velocidade será automaticamente aplicada às tentativas de login. Por padrão, o usuário não poderá fazer login por um minuto se ele não conseguir fornecer as credenciais corretas após várias tentativas. O limite é exclusivo do nome de usuário/e-mail e da sua IP.</p><div class="info custom-block"><p class="custom-block-title">NOTA</p><p>Se você quiser limitar a taxa de outras rotas em seu aplicativo, consulte a <a href="/docs/routing.html#rate-limiting">documentação sobre limitação de taxa</a>.</p></div><h2 id="autenticacao-manual-de-usuarios" tabindex="-1">Autenticação manual de usuários <a class="header-anchor" href="#autenticacao-manual-de-usuarios" aria-label="Permalink to &quot;Autenticação manual de usuários&quot;">​</a></h2><p>Você não é obrigado a usar o esqueleto de autenticação incluído nos <a href="/docs/starter-kits.html">kits iniciais da aplicação</a>. Se optar por não utilizá-lo, será necessário gerenciar a autenticação do usuário diretamente com as classes de autenticação do Laravel. Não se preocupe, é muito fácil!</p><p>Acessaremos os serviços de autenticação do Laravel através da <code>Auth</code> <a href="/docs/facades.html">facade</a>, então precisamos garantir que importemos a facade na parte superior da classe. Depois, vamos conferir o método <code>attempt</code>. O método <code>attempt</code> é normalmente usado para gerenciar tentativas de autenticação do formulário de &quot;login&quot; (log-in) do seu aplicativo. Se a autenticação for bem sucedida, você deve regenerar a <a href="/docs/session.html">session</a> do usuário para evitar a fixação da sessão (<a href="https://en.wikipedia.org/wiki/Session_fixation" target="_blank" rel="noreferrer">session fixation</a>):</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> App\\Http\\Controllers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Http\\Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Http\\RedirectResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Support\\Facades\\Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LoginController</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Controller</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * Lidar com uma tentativa de autenticação.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> authenticate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $request)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> RedirectResponse</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        $credentials </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">validate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;email&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;required&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;email&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;password&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;required&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">attempt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($credentials)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            $request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">regenerate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> redirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">intended</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;dashboard&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> back</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withErrors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;email&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;The provided credentials do not match our records.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ])</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onlyInput</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;email&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>O método <code>attempt</code> aceita uma matriz de pares chave/valor como primeiro argumento. Os valores da matriz serão usados para encontrar o usuário na sua tabela de banco de dados. Portanto, no exemplo acima, o usuário será recuperado pelo valor da coluna <code>email</code>. Se o usuário for encontrado, a senha armazenada em hash na base de dados será comparada com o valor da senha passada ao método via a matriz. Você não deve fazer o hash do valor da senha de solicitação pois o framework automaticamente fará o hash antes de comparar com a senha &quot;hasheada&quot; na base de dados. Uma sessão autenticada será iniciada para o usuário se os dois hashes de senhas forem iguais.</p><p>Lembre-se de que os serviços de autenticação do Laravel irão recuperar os usuários do seu banco de dados com base na configuração &quot;provider&quot; do seu guard de autenticação. No arquivo de configuração padrão <code>config/auth.php</code>, o provedor de usuário Eloquent é especificado e instruído a usar o modelo <code>App\\Models\\User</code> ao recuperar os usuários. Você pode alterar esses valores em seu arquivo de configuração com base nas necessidades do seu aplicativo.</p><p>O método <code>attempt</code> retornará <code>true</code> caso a autenticação seja bem-sucedida. Caso contrário, retornará <code>false</code>.</p><p>O método <code>intended</code>, fornecido pelo redirecionador do Laravel, redirecionará o usuário para a URL que ele tentava acessar antes de ser interceptado pelos middlewares de autenticação. Um URI de recuperação pode ser dado para este método no caso da destinatária pretendida não estar disponível.</p><h4 id="especificacao-de-condicoes-adicionais" tabindex="-1">Especificação de condições adicionais <a class="header-anchor" href="#especificacao-de-condicoes-adicionais" aria-label="Permalink to &quot;Especificação de condições adicionais&quot;">​</a></h4><p>Se você quiser, poderá também adicionar condições de consulta extras à consulta de autenticação, além do e-mail e da senha do usuário. Para fazer isso, basta adicionar as condições de consulta ao array passado para o método <code>attempt</code>. Por exemplo, podemos verificar se o usuário está marcado como &quot;ativo&quot;:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">attempt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;email&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $email, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;password&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $password, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;active&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // A autenticação foi bem-sucedida...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Para condições de consulta mais complexas, é possível fornecer um closure na sua matriz de credenciais. Este closure será invocada com a instância da consulta, permitindo que você personalize a consulta com base nas necessidades do aplicativo:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Database\\Eloquent\\Builder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">attempt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;email&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $email, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;password&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $password, </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Builder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $query) =&gt; $query</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">has</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;activeSubscription&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // A autenticação foi bem-sucedida...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">ATENÇÃO</p><p>Nestes exemplos, o campo &quot;e-mail&quot; não é uma opção obrigatória e serve apenas como exemplo. Deve usar o nome da coluna que corresponde ao campo &quot;nome de utilizador&quot; na sua tabela de base de dados.</p></div><p>O método <code>attemptWhen</code>, que recebe um closure como o seu segundo argumento, permite realizar uma inspeção mais abrangente do potencial utilizador antes de se proceder à autenticação. O closure recebe o potencial utilizador e deve retornar <code>true</code> ou <code>false</code> para indicar se o mesmo pode ser autorizado:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">attemptWhen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;email&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $email,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;password&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $password,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $user) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isNotBanned</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // A autenticação foi bem-sucedida...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="acessando-instancias-de-guarda-especificas" tabindex="-1">Acessando instâncias de guarda específicas <a class="header-anchor" href="#acessando-instancias-de-guarda-especificas" aria-label="Permalink to &quot;Acessando instâncias de guarda específicas&quot;">​</a></h4><p>Por meio do método <code>guard</code> da facade <code>Auth</code>, você pode especificar qual instância de guard gostaria de utilizar ao autenticar o usuário. Isso permite que você gerencie a autenticação para partes distintas de sua aplicação, usando modelos ou tabelas de usuários inteiramente separados.</p><p>O nome da guarda passado à função <code>guard</code> deverá corresponder a uma das guardas configuradas no arquivo de configuração <code>auth.php</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">guard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;admin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">attempt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($credentials)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="lembrando-os-usuarios" tabindex="-1">Lembrando os usuários <a class="header-anchor" href="#lembrando-os-usuarios" aria-label="Permalink to &quot;Lembrando os usuários&quot;">​</a></h3><p>Muitas aplicações Web disponibilizam um check-box &quot;Lembrar de mim&quot; no formulário de login. Se pretender disponibilizar a funcionalidade &quot;Lembrar-me de mim&quot; na aplicação, pode passar um valor boolean como segundo argumento ao método <code>attempt</code>.</p><p>Quando este valor é <code>true</code>, o Laravel manterá o usuário autenticado indefinidamente ou até que ele se logue manualmente. A tabela <code>users</code> deve incluir a coluna de string <code>remember_token</code>, que será usada para armazenar o token de &quot;lembre-se de mim&quot;. A migração de tabela <code>users</code> inclusa nos novos aplicativos do Laravel já inclui essa coluna:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Support\\Facades\\Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">attempt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;email&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $email, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;password&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $password], $remember)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // O usuário está sendo lembrado...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Se o seu aplicativo oferecer funcionalidade de &quot;lembrar de mim&quot;, poderá utilizar a metodologia <code>viaRemember</code> para determinar se o utilizador atualmente autenticado foi autenticado usando um cookie de &quot;lembrar-me&quot;:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Support\\Facades\\Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">viaRemember</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="outros-metodos-de-autenticacao" tabindex="-1">Outros métodos de autenticação <a class="header-anchor" href="#outros-metodos-de-autenticacao" aria-label="Permalink to &quot;Outros métodos de autenticação&quot;">​</a></h3><h4 id="autentique-uma-instancia-de-usuario" tabindex="-1">Autentique uma instância de usuário <a class="header-anchor" href="#autentique-uma-instancia-de-usuario" aria-label="Permalink to &quot;Autentique uma instância de usuário&quot;">​</a></h4><p>Se você precisar definir uma instância de usuário existente como o usuário atualmente autenticado, pode passar a instância de usuário para o método <code>login</code> da facade <code>Auth</code>. A instância de usuário fornecida deve ser uma implementação do contrato <code>Illuminate\\Contracts\\Auth\\Authenticatable</code>. O modelo <code>App\\Models\\User</code>, incluído com Laravel, já implementa essa interface. Esse método de autenticação é útil quando você já possui uma instância de usuário válida, como após um usuário se registrar em seu aplicativo:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Support\\Facades\\Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($user);</span></span></code></pre></div><p>É possível passar um valor verdadeiro como o segundo argumento para a função <code>login</code>. Este valor indica se pretende ou não ativar a funcionalidade &quot;esquecer-me&quot;. Se esta opção estiver ativa, a sessão permanece autenticada indefinidamente ou até que o utilizador saia manualmente da aplicação:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($user, $remember </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>Se necessário, pode especificar um autenticação guard antes de chamar o método <code>login</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">guard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;admin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($user);</span></span></code></pre></div><h4 id="autentique-um-usuario-por-identificacao" tabindex="-1">Autentique um usuário por identificação <a class="header-anchor" href="#autentique-um-usuario-por-identificacao" aria-label="Permalink to &quot;Autentique um usuário por identificação&quot;">​</a></h4><p>Para autenticar um usuário utilizando o identificador primário do seu registro de base de dados, você pode utilizar a metodologia <code>loginUsingId</code>. Esta metodologia aceita o identificador primário do usuário que pretende ser autenticado:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loginUsingId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>É possível passar um valor boolean no segundo argumento do método <code>loginUsingId</code>. Esse valor indica se o usuário deseja a funcionalidade &quot;Lembrar-me&quot; para a sessão autenticada. Lembre-se de que, ao ativá-la, a sessão será autenticada indefinidamente ou até que o próprio usuário saia da aplicação:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loginUsingId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, $remember </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h4 id="autenticar-um-usuario-de-um-unico-vezo" tabindex="-1">Autenticar um Usuário de Um Único Vezo <a class="header-anchor" href="#autenticar-um-usuario-de-um-unico-vezo" aria-label="Permalink to &quot;Autenticar um Usuário de Um Único Vezo&quot;">​</a></h4><p>Pode utilizar o método <code>once</code>, para autenticar um utilizador no aplicativo numa única solicitação sem ter que gerir nenhuma sessão ou cookies durante a chamada a este método.</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">once</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($credentials)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="autenticacao-basica-do-http" tabindex="-1">Autenticação básica do HTTP <a class="header-anchor" href="#autenticacao-basica-do-http" aria-label="Permalink to &quot;Autenticação básica do HTTP&quot;">​</a></h2><p>A autenticação básica HTTP (<a href="https://pt.wikipedia.org/wiki/Basic_access_authentication" target="_blank" rel="noreferrer">https://pt.wikipedia.org/wiki/Basic_access_authentication</a>) fornece uma maneira rápida de autenticar usuários da sua aplicação sem configurar uma página &quot;login&quot; específica. Para começar, adicione o <code>auth.basic</code> <a href="/docs/middleware.html">middleware</a> a uma rota. O middleware <code>auth.basic</code> é incluído no framework Laravel, então você não precisa defini-lo:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/profile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Somente usuários autenticados podem acessar esta rota...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">middleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;auth.basic&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>Depois que o middleware tiver sido ligado à rota, você será automaticamente solicitado a fornecer credenciais ao acessar a rota no seu navegador. Por padrão, o middleware <code>auth.basic</code> pressupõe que a coluna <code>email</code> na sua tabela de dados do banco de dados <code>users</code> é o &quot;username&quot; do usuário.</p><h4 id="uma-nota-sobre-o-fastcgi" tabindex="-1">Uma nota sobre o FastCGI <a class="header-anchor" href="#uma-nota-sobre-o-fastcgi" aria-label="Permalink to &quot;Uma nota sobre o FastCGI&quot;">​</a></h4><p>Se você estiver usando o PHP FastCGI e o Apache para atender seu aplicativo Laravel, a autenticação básica HTTP pode não funcionar corretamente. Para sanar esses problemas, as linhas a seguir podem ser adicionadas ao arquivo de configurações do seu aplicativo <code>.htaccess</code>:</p><div class="language-apache vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">apache</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RewriteCond</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;"> %{HTTP:Authorization}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ^(.+)$</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RewriteRule</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;"> .*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [E=HTTP_AUTHORIZATION:%{</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">HTTP:Authorization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]</span></span></code></pre></div><h3 id="autenticacao-basica-http-sem-estado" tabindex="-1">Autenticação básica HTTP sem estado <a class="header-anchor" href="#autenticacao-basica-http-sem-estado" aria-label="Permalink to &quot;Autenticação básica HTTP sem estado&quot;">​</a></h3><p>Também é possível utilizar autenticação básica HTTP sem definir um cookie de identificador do usuário na sessão. Isto é útil principalmente se optar por utilizar a autenticação HTTP para autenticar solicitações à API da aplicação. Para isso, defina um <a href="/docs/middleware.html">middleware</a> que chame o método <code>onceBasic</code>. Se o método <code>onceBasic</code> não retornar nenhuma resposta, a solicitação pode ser encaminhada para a aplicação:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> App\\Http\\Middleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Closure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Http\\Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Support\\Facades\\Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Symfony\\Component\\HttpFoundation\\Response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AuthenticateOnceWithBasicAuth</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * Lidar com uma solicitação recebida.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  \\Closure</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\Illuminate\\Http\\Request</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">): (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\Symfony\\Component\\HttpFoundation\\Response</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">)  $</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">next</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $request, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Closure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $next)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Response</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onceBasic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $next($request);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Em seguida, anexe o middleware a uma rota:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Somente usuários autenticados podem acessar esta rota...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">middleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AuthenticateOnceWithBasicAuth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h2 id="sair" tabindex="-1">Sair <a class="header-anchor" href="#sair" aria-label="Permalink to &quot;Sair&quot;">​</a></h2><p>Para desconectar manualmente os usuários de sua aplicação, você poderá usar o método <code>logout</code>, fornecido pela facade <code>Auth</code>. Isso irá remover as informações de autenticação da sessão do usuário para que os pedidos subsequentes não sejam autenticados.</p><p>Além de chamar o método <code>logout</code>, é recomendável invalidar a sessão do usuário e gerar novamente seu <a href="/docs/csrf.html">Token CSRF</a>. Depois que o usuário estiver logado, você normalmente redireciona-o para a raiz de sua aplicação:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Http\\Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Http\\RedirectResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Support\\Facades\\Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * Desconecte o usuário do aplicativo.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> logout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $request)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> RedirectResponse</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">logout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">invalidate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">regenerateToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> redirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="invalidacao-de-sessoes-em-outros-dispositivos" tabindex="-1">Invalidação de sessões em outros dispositivos <a class="header-anchor" href="#invalidacao-de-sessoes-em-outros-dispositivos" aria-label="Permalink to &quot;Invalidação de sessões em outros dispositivos&quot;">​</a></h3><p>O Laravel também disponibiliza um mecanismo para anular e &quot;terminar&quot; as sessões de utilizador, que estejam ativas noutros dispositivos sem anular a sessão no seu próprio dispositivo. É normal utilizar esta funcionalidade quando o utilizador está a alterar ou a atualizar a sua senha e pretende anular as sessões em outros dispositivos, mantendo o dispositivo atual autenticado.</p><p>Antes de começar, certifique-se que o middleware <code>Illuminate\\Session\\Middleware\\AuthenticateSession</code> está incluído nos roteadores que devem receber a autenticação da sessão. Normalmente, deve colocá-lo numa definição do grupo de rotas para que possa ser aplicado na maioria dos rotas da sua aplicação. Como padrão, o middleware <code>AuthenticateSession</code> pode estar ligado a um roteador utilizando o [alias de middleware] (/docs/middleware#middleware-alias):</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">middleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;auth&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;auth.session&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>Em seguida, você pode usar o método <code>logoutOtherDevices</code> fornecido pela interface <code>Auth</code>. Este método requer que o usuário confirme sua senha atual, e sua aplicação deve aceitá-la por meio de um formulário:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Support\\Facades\\Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">logoutOtherDevices</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($currentPassword);</span></span></code></pre></div><p>Quando o método <code>logoutOtherDevices</code> é acionado, as outras sessões do usuário serão totalmente invalidadas, ou seja, elas serão &quot;desconectadas&quot; de todas as guards para as quais a autenticação foi efetuada anteriormente.</p><h2 id="confirmacao-de-senha" tabindex="-1">Confirmação de Senha <a class="header-anchor" href="#confirmacao-de-senha" aria-label="Permalink to &quot;Confirmação de Senha&quot;">​</a></h2><p>Ao construir seu aplicativo, você pode ocasionalmente precisar de ações que requerem confirmação do usuário antes da ação ser realizada ou antes que o usuário seja redirecionado para uma área sensível do aplicativo. O Laravel inclui middleware integrados para tornar esse processo simples. A implementação dessa funcionalidade exigirá que você defina duas rotas: um roteador para exibição de uma visualização pedindo confirmação da senha e outro roteador para confirmar se a senha é válida e redirecionar o usuário ao seu destino.</p><div class="info custom-block"><p class="custom-block-title">AVISO</p><p>A documentação a seguir discute como integrar diretamente os recursos de confirmação de senha do Laravel; entretanto, se você quiser começar mais rapidamente, os <a href="/docs/starter-kits.html">kits iniciais de aplicativos Laravel</a> incluem suporte para esse recurso!</p></div><h3 id="configuracao" tabindex="-1">Configuração <a class="header-anchor" href="#configuracao" aria-label="Permalink to &quot;Configuração&quot;">​</a></h3><p>Depois de confirmar sua senha, o usuário não será solicitado a confirmar sua senha novamente por três horas. No entanto, você pode configurar o período de tempo antes que o usuário seja solicitado novamente a fornecer sua senha, alterando o valor de configuração <code>password_timeout</code> no arquivo de configuração <code>config/auth.php</code> da sua aplicação.</p><h3 id="roteamento" tabindex="-1">Roteamento <a class="header-anchor" href="#roteamento" aria-label="Permalink to &quot;Roteamento&quot;">​</a></h3><h4 id="o-formulario-de-confirmacao-da-senha" tabindex="-1">O formulário de confirmação da senha <a class="header-anchor" href="#o-formulario-de-confirmacao-da-senha" aria-label="Permalink to &quot;O formulário de confirmação da senha&quot;">​</a></h4><p>Primeiro, definiremos uma rota para exibir uma visualização que solicita ao usuário confirmar sua senha:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/confirm-password&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;auth.confirm-password&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">middleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;auth&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;password.confirm&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>Como esperado, o formulário retornado por este caminho deve conter um campo com a chave <code>password</code>. Além disso, é possível incluir um texto explicando ao usuário que ele está entrando em uma área protegida da aplicação e deve confirmar sua senha.</p><h4 id="confirmar-a-senha" tabindex="-1">Confirmar a senha <a class="header-anchor" href="#confirmar-a-senha" aria-label="Permalink to &quot;Confirmar a senha&quot;">​</a></h4><p>Em seguida, definiremos uma rota que tratará o pedido de formulário a partir da exibição “confirmar senha”. Esta rota será responsável por validar a senha e redirecionar o usuário para seu destino pretendido:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Http\\Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Support\\Facades\\Hash</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Support\\Facades\\Redirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/confirm-password&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $request) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Hash</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">check</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">password, $request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">password)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> back</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withErrors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;password&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;A senha fornecida não corresponde aos nossos registros.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">passwordConfirmed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> redirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">intended</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">middleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;auth&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;throttle:6,1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span></code></pre></div><p>Antes de continuar, vamos analisar este caminho com mais detalhes. Primeiro, o campo <code>password</code> da requisição é determinado para realmente corresponder à senha do usuário autenticado. Se a senha for válida, precisamos informar a sessão do Laravel de que o usuário confirmou sua senha. O método <code>passwordConfirmed</code> definirá um timestamp na sessão do usuário que o Laravel poderá usar para determinar quando o usuário confirmou sua senha pela última vez. Finalmente, podemos redirecionar o usuário para seu destino pretendido.</p><h3 id="proteger-rotas" tabindex="-1">Proteger rotas <a class="header-anchor" href="#proteger-rotas" aria-label="Permalink to &quot;Proteger rotas&quot;">​</a></h3><p>Você deve garantir que qualquer rota que execute uma ação que requer confirmação de senha recente receba o middleware <code>password.confirm</code>. Este middleware é incluído na instalação padrão do Laravel e armazenará automaticamente o destino pretendido do usuário na sessão para que o usuário possa ser redirecionado para esse local após confirmar sua senha. Após armazenar o destino pretendido do usuário na sessão, o middleware redirecionará o usuário para a rota denominada: <code>password.confirm</code> <a href="/docs/routing.html#named-routes">rotas com nomes especificados</a>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/settings&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">middleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;password.confirm&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/settings&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">middleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;password.confirm&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span></code></pre></div><h2 id="adicionando-guardas-personalizadas" tabindex="-1">Adicionando Guardas Personalizadas <a class="header-anchor" href="#adicionando-guardas-personalizadas" aria-label="Permalink to &quot;Adicionando Guardas Personalizadas&quot;">​</a></h2><p>Você pode definir suas próprias defesas de autenticação utilizando o método <code>extend</code> na facade <code>Auth</code>. O código que chama o método <code>extend</code> deve ser colocado dentro de um <a href="/docs/providers.html">fornecedor de serviços</a>. Como Laravel já tem um <code>AppServiceProvider</code>, podemos colocar o código nesse provedor:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> App\\Providers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> App\\Services\\Auth\\JwtGuard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Contracts\\Foundation\\Application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Support\\Facades\\Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Support\\ServiceProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AppServiceProvider</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ServiceProvider</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * Inicialize qualquer serviço de aplicativo.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> boot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">extend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;jwt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $app, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $name, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $config) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Retornar uma instância de Illuminate\\Contracts\\Auth\\Guard...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JwtGuard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createUserProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($config[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;provider&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Como pode ser visto no exemplo acima, o callback passado para a método <code>extend</code> deve retornar uma implementação do <code>Illuminate\\Contracts\\Auth\\Guard</code>. Essa interface contém alguns métodos que você precisará implementar para definir um guard personalizado. Depois de seu guard personalizado estar definido, você poderá referenciá-lo na configuração <code>guards</code> do arquivo de configuração <code>auth.php</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;guards&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;api&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;driver&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;jwt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;provider&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span></code></pre></div><h3 id="closure-em-guardas-de-requisicoes" tabindex="-1">Closure em Guardas de Requisições <a class="header-anchor" href="#closure-em-guardas-de-requisicoes" aria-label="Permalink to &quot;Closure em Guardas de Requisições&quot;">​</a></h3><p>A forma mais simples de implementar um sistema personalizado de autenticação baseado em solicitações HTTP é através do método <code>Auth::viaRequest</code>. Este método permite definir rapidamente o seu processo de autenticação usando um único closure.</p><p>Para começar, chame o método <code>Auth::viaRequest</code> dentro do método <code>boot</code> do provedor de serviços da aplicação. O método <code>viaRequest</code> aceita um nome de motor de autenticação como seu primeiro argumento. Esse nome pode ser qualquer string que descreva sua guarda personalizada. O segundo argumento passado para o método deve ser um closure que recebe a solicitação HTTP entrando e retorna uma instância do usuário ou, se a autenticação falhar, <code>null</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> App\\Models\\User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Http\\Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Support\\Facades\\Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * Inicialize qualquer serviço de aplicativo.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> boot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">viaRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;custom-token&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $request) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> User</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;token&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) $request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">token)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">first</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Depois de definido o driver de autenticação personalizado, você poderá configurá-lo como um driver no âmbito da configuração <code>guards</code> do seu arquivo de configuração <code>auth.php</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;guards&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;api&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;driver&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;custom-token&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span></code></pre></div><p>Por último, pode fazer referência à autenticação quando atribuir o middleware de autenticação a uma rota:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">middleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;auth:api&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span></code></pre></div><h2 id="adicionando-provedores-de-usuario-personalizado" tabindex="-1">Adicionando provedores de usuário personalizado <a class="header-anchor" href="#adicionando-provedores-de-usuario-personalizado" aria-label="Permalink to &quot;Adicionando provedores de usuário personalizado&quot;">​</a></h2><p>Se você não estiver usando um banco de dados relacional tradicional para armazenar seus usuários, você precisará estender o Laravel com seu próprio provedor de autenticação de usuários. Usaremos o método <code>provider</code> na fachada <code>Auth</code> para definir um provedor de usuário personalizado. O resolvedor do provedor do usuário deve retornar uma implementação de <code>Illuminate\\Contracts\\Auth\\UserProvider</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> App\\Providers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> App\\Extensions\\MongoUserProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Contracts\\Foundation\\Application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Support\\Facades\\Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Illuminate\\Support\\ServiceProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AppServiceProvider</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ServiceProvider</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * Inicialize qualquer serviço de aplicativo.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> boot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        Auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">provider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mongo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $app, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $config) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Retornar uma instância de Illuminate\\Contracts\\Auth\\UserProvider...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MongoUserProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mongo.connection&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Depois de registrar o provedor usando o método <code>provider</code>, você pode alternar para o novo provedor de usuário em seu arquivo de configuração <code>auth.php</code>. Defina primeiro um <code>provider</code> que use o seu novo driver:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;providers&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;users&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;driver&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;mongo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span></code></pre></div><p>Finalmente, você pode fazer referência a este provedor na sua configuração de <code>guards</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;guards&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;web&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;driver&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;session&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;provider&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span></code></pre></div><h3 id="o-contrato-de-prestador-de-servicos-ao-usuario" tabindex="-1">O Contrato de Prestador de Serviços ao Usuário <a class="header-anchor" href="#o-contrato-de-prestador-de-servicos-ao-usuario" aria-label="Permalink to &quot;O Contrato de Prestador de Serviços ao Usuário&quot;">​</a></h3><p>As implementações do <code>Illuminate\\Contracts\\Auth\\UserProvider</code> são responsáveis por buscar uma implementação de <code>Illuminate\\Contracts\\Auth\\Authenticatable</code> a partir de um sistema persistente de armazenamento, como MySQL ou MongoDB. Estas duas interfaces permitem que os mecanismos de autenticação do Laravel continuem funcionando independentemente de qual for o tipo de classe utilizada para representar o usuário autenticado:</p><p>Vamos dar uma olhada no contrato <code>Illuminate\\Contracts\\Auth\\UserProvider</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Illuminate\\Contracts\\Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserProvider</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> retrieveById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($identifier);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> retrieveByToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($identifier, $token);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> updateRememberToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Authenticatable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $user, $token);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> retrieveByCredentials</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $credentials);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> validateCredentials</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Authenticatable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $user, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $credentials);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rehashPasswordIfRequired</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Authenticatable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $user, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $credentials, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $force </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>A função <code>retrieveById</code> normalmente recebe uma chave que representa o usuário, como um identificador de incremento automático de banco de dados do MySQL. O recurso da implementação <code>Authenticatable</code> correspondente ao ID deve ser recuperado e retornado pela função.</p><p>A função <code>retrieveByToken</code> recupera um usuário por meio do seu <code>$identifier</code> exclusivo e <code>$token</code>, normalmente armazenados em uma coluna de banco de dados como <code>remember_token</code>. Assim como o método anterior, a implementação de <code>Authenticatable</code> com um valor de token correspondente deve ser retornada por este método.</p><p>O método <code>updateRememberToken</code> atualiza o <code>remember_token</code> da instância de <code>$user</code> com o novo <code>$token</code>. Um token novo é atribuído aos usuários num sucesso tentativa de autenticação ou no momento em que o utilizador se registra.</p><p>O método <code>retrieveByCredentials</code> recebe o array de credenciais passadas ao método <code>Auth::attempt</code> durante a tentativa de autenticação em uma aplicação. O método deve, então, &quot;consultar&quot; no armazenamento persistente subjacente os usuários que possuam essas credenciais. Normalmente, esse método executará uma consulta com uma condição <code>where</code> para procurar um registro de usuário com um &quot;username&quot; igual ao valor do <code>$credentials[&#39;username&#39;]</code>. O método deve retornar uma implementação do <code>Authenticatable</code>. <strong>Esse método não deve tentar fazer qualquer validação ou autenticação da senha.</strong></p><p>O método <code>validateCredentials</code> deve comparar o <code>$user</code> fornecido com as credenciais para autenticá-lo. Por exemplo, esse método normalmente usa a função <code>Hash::check</code> para comparar o valor de <code>$user-&gt;getAuthPassword()</code> com o valor de <code>$credentials[&#39;password&#39;]</code>. Esse método deve retornar <code>true</code> ou <code>false</code>, indicando se a senha é válida.</p><p>O método <code>rehashPasswordIfRequired</code> deve reprocessar a senha do usuário indicado se necessário e se o suporte for disponibilizado. Por exemplo, esse método normalmente usa o método <code>Hash::needsRehash</code> para determinar se o valor <code>$credentials[&#39;password&#39;]</code> precisa ser reprocessado. Se a senha precisar ser reprocessada, o método deve usar o método <code>Hash::make</code> para reprocessar a senha e atualizar o registro do usuário no armazenamento persistente seguinte.</p><h3 id="o-contrato-com-autenticacao" tabindex="-1">O Contrato com Autenticação <a class="header-anchor" href="#o-contrato-com-autenticacao" aria-label="Permalink to &quot;O Contrato com Autenticação&quot;">​</a></h3><p>Agora que explorámos cada um dos métodos do <code>UserProvider</code>, vamos analisar o contrato <code>Authenticatable</code>. Lembre-se de que os provedores de usuário devem retornar implementações desta interface nos métodos <code>retrieveById</code>, <code>retrieveByToken</code> e <code>retrieveByCredentials</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">php</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Illuminate\\Contracts\\Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Authenticatable</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getAuthIdentifierName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getAuthIdentifier</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getAuthPasswordName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getAuthPassword</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getRememberToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setRememberToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($value);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getRememberTokenName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Essa interface é simples. O método <code>getAuthIdentifierName</code> deve retornar o nome da coluna &quot;chave primária&quot; do usuário e o método <code>getAuthIdentifier</code> deve retornar a &quot;chave primária&quot; do usuário. Quando se utiliza um servidor de banco de dados MySQL, provavelmente seria o identificador autogerado atribuído ao registro do usuário. O método <code>getAuthPasswordName</code> deve retornar o nome da coluna de senha do usuário. O método <code>getAuthPassword</code> deve retornar a senha criptografada do usuário.</p><p>Essa interface permite que o sistema de autenticação trabalhe com qualquer classe &quot;user&quot;, independentemente da abstração de armazenamento ou ORM que você esteja usando. Por padrão, o Laravel inclui uma classe <code>App\\Models\\User</code> no diretório <code>app/Models</code>, a qual implementa essa interface.</p><h2 id="reencriptacao-automatica-de-senhas" tabindex="-1">Reencriptação automática de senhas <a class="header-anchor" href="#reencriptacao-automatica-de-senhas" aria-label="Permalink to &quot;Reencriptação automática de senhas&quot;">​</a></h2><p>O algoritmo de geração automática de senhas do Laravel é o bcrypt. O &quot;factor de trabalho&quot; para as hashtags bcrypt pode ser ajustado através do arquivo de configuração da sua aplicação <code>config/hashing.php</code> ou da variável de ambiente <code>BCRYPT_ROUNDS</code>.</p><p>Normalmente, o fator de trabalho do bcrypt deve ser aumentado ao longo do tempo à medida que o poder de processamento da CPU/GPU aumenta. Se você aumentar o fator de trabalho bcrypt para sua aplicação, o Laravel irá refazer as senhas dos usuários de maneira elegante e automática à medida que os usuários se autenticam com sua aplicação através dos kits iniciais do Laravel ou quando você <a href="#authenticating-users">autentica manualmente os usuários</a> através do método <code>attempt</code>.</p><p>Normalmente, o rehashing automático de senha não deve atrapalhar seu aplicativo; entretanto, você pode desativar esse comportamento publicando o arquivo de configuração <code>hashing</code>:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config:publish</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hashing</span></span></code></pre></div><p>Depois de publicado o arquivo de configuração, você pode definir o valor da configuração <code>rehash_on_login</code> para <code>false</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;rehash_on_login&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span></code></pre></div><h2 id="eventos" tabindex="-1">Eventos <a class="header-anchor" href="#eventos" aria-label="Permalink to &quot;Eventos&quot;">​</a></h2><p>O Laravel envia uma variedade de <a href="/docs/events.html">events</a> durante o processo de autenticação. Você pode definir <a href="/docs/events.html">ouvintes</a> para qualquer um dos seguintes eventos:</p><table><thead><tr><th>Eventos</th></tr></thead><tbody><tr><td><code>Illuminate\\Auth\\Events\\Registered</code></td></tr><tr><td><code>Iluminar\\Auth\\Events\\Attempting</code></td></tr><tr><td><code>Illuminate\\Auth\\Events\\Authenticated</code></td></tr><tr><td><code>Illuminate\\Auth\\Events\\Login</code></td></tr><tr><td><code>Illuminate\\Auth\\Events\\Failed</code></td></tr><tr><td><code>Illuminate\\Auth\\Events\\Validated</code></td></tr><tr><td><code>Illuminate\\Auth\\Events\\Verified</code></td></tr><tr><td><code>Illuminate\\Auth\\Events\\Logout</code></td></tr><tr><td><code>Illuminate\\Auth\\Events\\CurrentDeviceLogout</code></td></tr><tr><td><code>Iluminar\\Auth\\Events\\OtherDeviceLogout</code></td></tr><tr><td><code>Illuminate\\Auth\\Events\\Lockout</code></td></tr><tr><td><code>Illuminate\\Auth\\Events\\PasswordReset</code></td></tr></tbody></table>`,193),o=[t];function p(l,r,h,d,k,c){return i(),a("div",null,o)}const E=s(n,[["render",p]]);export{g as __pageData,E as default};
